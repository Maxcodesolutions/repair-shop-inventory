<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Repair Shop Inventory Management</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="apple-touch-icon" href="favicon.svg">
    <link rel="shortcut icon" href="favicon.svg">
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Login Overlay Styles */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            font-family: 'Inter', sans-serif;
        }

        .login-container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        .login-header {
            margin-bottom: 30px;
        }

        .login-header h1 {
            color: #333;
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .login-header p {
            color: #666;
            font-size: 16px;
        }

        .login-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
            font-size: 14px;
        }

        .form-group input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
            box-sizing: border-box;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .login-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
            margin-top: 10px;
        }

        .login-btn:hover {
            transform: translateY(-2px);
        }

        .login-error {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 10px;
            display: none;
        }

        .login-success {
            color: #27ae60;
            font-size: 14px;
            margin-top: 10px;
            display: none;
        }

        .app-container {
            display: none;
        }

        .app-container.logged-in {
            display: flex;
        }

        /* Global Search Results Styles */
        .global-search-results {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 800px;
            max-height: 70vh;
            background: white;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            overflow: hidden;
            border: 1px solid #e0e0e0;
        }

        .search-results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: #f8f9fa;
            border-bottom: 1px solid #e0e0e0;
        }

        .search-results-header h3 {
            margin: 0;
            color: #333;
            font-size: 18px;
        }

        .close-search-btn {
            background: none;
            border: none;
            font-size: 18px;
            color: #666;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: color 0.3s;
        }

        .close-search-btn:hover {
            color: #dc3545;
        }

        .search-results-content {
            max-height: calc(70vh - 60px);
            overflow-y: auto;
            padding: 0;
        }

        .search-category {
            border-bottom: 1px solid #f0f0f0;
        }

        .search-category:last-child {
            border-bottom: none;
        }

        .search-category h4 {
            margin: 0;
            padding: 15px 20px 10px;
            background: #f8f9fa;
            color: #495057;
            font-size: 14px;
            font-weight: 600;
            border-bottom: 1px solid #e9ecef;
        }

        .search-category h4 i {
            margin-right: 8px;
            color: #007bff;
        }

        .search-items {
            padding: 0;
        }

        .search-item {
            padding: 12px 20px;
            border-bottom: 1px solid #f8f9fa;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .search-item:hover {
            background-color: #f8f9fa;
        }

        .search-item:last-child {
            border-bottom: none;
        }

        .search-item .item-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
            font-size: 14px;
        }

        .search-item .item-details {
            color: #666;
            font-size: 12px;
        }

        .no-results {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }

        .no-results i {
            font-size: 48px;
            color: #ddd;
            margin-bottom: 15px;
        }

        .no-results p {
            margin: 5px 0;
            font-size: 14px;
        }

        /* Search bar enhancement */
        .search-bar {
            position: relative;
        }

        .search-bar input:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
        }

        /* Responsive design for search results */
        @media (max-width: 768px) {
            .global-search-results {
                width: 95%;
                max-height: 80vh;
                top: 70px;
            }

            .search-results-content {
                max-height: calc(80vh - 60px);
            }

            .search-item {
                padding: 15px 20px;
            }

            .search-item .item-name {
                font-size: 16px;
            }

            .search-item .item-details {
                font-size: 14px;
            }
        }

        /* Small Muted Text */
        .small-muted {
            font-size: 12px;
            color: #666;
        }

        /* Forgot Password Link */
        .forgot-link {
            color: #3498db;
            text-align: center;
            display: block;
            cursor: pointer;
        }

        /* Hidden Element */
        .hidden {
            display: none;
        }

        /* Chart Container Styles */
        .chart-container {
            margin-bottom: 20px;
        }

        /* Dashboard Canvas Styles */
        .dashboard-canvas {
            height: 180px !important;
        }
    </style>
</head>
<body>
    <!-- Login Overlay -->
    <div id="login-overlay" class="login-overlay">
        <div class="login-container">
            <div class="login-header">
                <h1><i class="fas fa-tools"></i> REPAIR MANIAC</h1>
                <p>ERP for Mobile and Laptop Repair</p>
                <p class="small-muted">
                    Default Login: <strong>admin</strong> / <strong>admin</strong>
                </p>
            </div>
            <form id="login-form" class="login-form">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" placeholder="Enter username" autocomplete="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter password" autocomplete="current-password" required>
                </div>
                <button type="submit" class="login-btn">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
                                        <button type="button" class="btn btn-secondary btn-block" onclick="simpleLogin(event)" style="margin-top: 10px; width: 100%;">
                            <i class="fas fa-bolt"></i> Simple Login (Test)
                        </button>
                        <button type="button" class="btn btn-info btn-block" onclick="createTestUsers()" style="margin-top: 10px; width: 100%;">
                            <i class="fas fa-users"></i> Create Test Users
                        </button>
                <a href="forgot-password.html" id="forgot-password-link" class="forgot-link">Forgot Password?</a>
                <div id="login-error" class="login-error"></div>
                <div id="login-success" class="login-success"></div>
            </form>
        </div>
    </div>

    <div class="app-container" id="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-tools"></i> REPAIR MANIAC</h2>
                <p>ERP for Mobile and Laptop Repair</p>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li><a href="#dashboard" class="nav-link" data-section="dashboard">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                    </a></li>
                    <li><a href="#inventory" class="nav-link" data-section="inventory">
                        <i class="fas fa-boxes"></i> Inventory
                    </a></li>
                    <li><a href="#purchases" class="nav-link" data-section="purchases">
                        <i class="fas fa-shopping-cart"></i> Purchases
                    </a></li>
                    <li><a href="#vendors" class="nav-link" data-section="vendors">
                        <i class="fas fa-users"></i> Vendors
                    </a></li>
                    <li><a href="#customers" class="nav-link" data-section="customers">
                        <i class="fas fa-user-friends"></i> Customers
                    </a></li>
                    <li><a href="#repairs" class="nav-link" data-section="repairs">
                        <i class="fas fa-wrench"></i> Repairs
                    </a></li>
                    <li><a href="#outsource" class="nav-link" data-section="outsource">
                        <i class="fas fa-external-link-alt"></i> Outsource
                    </a></li>
                    <li><a href="#invoices" class="nav-link" data-section="invoices">
                        <i class="fas fa-file-invoice"></i> Invoices
                    </a></li>
                    <li><a href="#quotations" class="nav-link" data-section="quotations">
                        <i class="fas fa-file-contract"></i> Quotations
                    </a></li>
                    <li><a href="#pickdrop" class="nav-link" data-section="pickdrop">
                        <i class="fas fa-truck"></i> Pick & Drop
                    </a></li>
                    <li><a href="#delivery" class="nav-link" data-section="delivery">
                        <i class="fas fa-shipping-fast"></i> Delivery
                    </a></li>
                    <li><a href="#payments" class="nav-link" data-section="payments">
                        <i class="fas fa-credit-card"></i> Payments
                    </a></li>
                    <li><a href="#warranties" class="nav-link" data-section="warranties">
                        <i class="fas fa-shield-alt"></i> Warranties
                    </a></li>
                    <li><a href="#reports" class="nav-link" data-section="reports">
                        <i class="fas fa-chart-bar"></i> Reports
                    </a></li>
                    <li><a href="#users" class="nav-link" data-section="users">
                        <i class="fas fa-users-cog"></i> User Management
                    </a></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-content">
                    <div class="logo-section">
                        <img src="favicon.svg" alt="Logo" class="logo">
                        <h1>Repair Shop Inventory</h1>
                    </div>
                    <div class="header-actions">
                        <div class="search-bar">
                            <i class="fas fa-search"></i>
                            <input type="text" placeholder="Search..." id="search-input">
                        </div>
                        <div class="connection-status" id="connection-status">
                            <span class="status-indicator offline" id="status-indicator"></span>
                            <span class="status-text" id="status-text">Checking connection...</span>
                        </div>
                        <div class="user-section" id="user-section">
                            <span class="username" id="header-username">Loading...</span>
                            <button class="btn btn-secondary" onclick="logout()">Logout</button>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Content Sections -->
            <div class="content-wrapper">
                <!-- Dashboard Section -->
                <section id="dashboard" class="content-section">
                    <!-- Dashboard Header -->
                    <div class="dashboard-header">
                        <div class="dashboard-welcome">
                            <h1>Welcome back, <span id="dashboard-username">User</span>! ðŸ‘‹</h1>
                            <p class="dashboard-subtitle">Here's what's happening with your repair shop today</p>
                        </div>
                        <div class="dashboard-date">
                            <div class="current-date">
                                <i class="fas fa-calendar-alt"></i>
                                <span id="current-date">Loading...</span>
                            </div>
                            <div class="current-time">
                                <i class="fas fa-clock"></i>
                                <span id="current-time">Loading...</span>
                            </div>
                        </div>
                        <div class="dashboard-actions">
                            <button class="btn btn-info btn-sm" onclick="migrateToSharedDocument()" title="Migrate data to shared document for real-time sync">
                                <i class="fas fa-sync-alt"></i> Enable Real-time Sync
                            </button>
                        </div>
                    </div>

                    <!-- Key Metrics Grid -->
                    <div class="dashboard-grid">
                        <div class="stat-card stat-card-primary clickable-card" onclick="navigateToSection('inventory')" title="Click to view Inventory">
                            <div class="stat-card-content">
                                <div class="stat-icon">
                                    <i class="fas fa-boxes"></i>
                                </div>
                                <div class="stat-details">
                                    <h3 id="total-items">0</h3>
                                    <p>Total Items</p>
                                    <span class="stat-change positive">+12% from last month</span>
                                </div>
                            </div>
                            <div class="stat-card-footer">
                                <span class="stat-label">Inventory</span>
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>

                        <div class="stat-card stat-card-warning clickable-card" onclick="navigateToSection('inventory')" title="Click to view Low Stock Items">
                            <div class="stat-card-content">
                                <div class="stat-icon">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div class="stat-details">
                                    <h3 id="low-stock">0</h3>
                                    <p>Low Stock Items</p>
                                    <span class="stat-change negative">Requires attention</span>
                                </div>
                            </div>
                            <div class="stat-card-footer">
                                <span class="stat-label">Stock Alert</span>
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>

                        <div class="stat-card stat-card-info clickable-card" onclick="navigateToSection('purchases')" title="Click to view Purchases">
                            <div class="stat-card-content">
                                <div class="stat-icon">
                                    <i class="fas fa-shopping-cart"></i>
                                </div>
                                <div class="stat-details">
                                    <h3 id="pending-orders">0</h3>
                                    <p>Pending Orders</p>
                                    <span class="stat-change neutral">Processing</span>
                                </div>
                            </div>
                            <div class="stat-card-footer">
                                <span class="stat-label">Purchases</span>
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>

                        <div class="stat-card stat-card-success clickable-card" onclick="navigateToSection('repairs')" title="Click to view Repairs">
                            <div class="stat-card-content">
                                <div class="stat-icon">
                                    <i class="fas fa-wrench"></i>
                                </div>
                                <div class="stat-details">
                                    <h3 id="active-repairs">0</h3>
                                    <p>Active Repairs</p>
                                    <span class="stat-change positive">In progress</span>
                                </div>
                            </div>
                            <div class="stat-card-footer">
                                <span class="stat-label">Repairs</span>
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>

                        <div class="stat-card stat-card-danger clickable-card" onclick="navigateToSection('warranties')" title="Click to view Warranties">
                            <div class="stat-card-content">
                                <div class="stat-icon">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <div class="stat-details">
                                    <h3 id="warranty-expiring">0</h3>
                                    <p>Warranties Expiring</p>
                                    <span class="stat-change negative">Soon</span>
                                </div>
                            </div>
                            <div class="stat-card-footer">
                                <span class="stat-label">Warranties</span>
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>

                        <div class="stat-card stat-card-purple clickable-card" onclick="navigateToSection('customers')" title="Click to view Customers">
                            <div class="stat-card-content">
                                <div class="stat-icon">
                                    <i class="fas fa-user-friends"></i>
                                </div>
                                <div class="stat-details">
                                    <h3 id="total-customers">0</h3>
                                    <p>Total Customers</p>
                                    <span class="stat-change positive">Growing</span>
                                </div>
                            </div>
                            <div class="stat-card-footer">
                                <span class="stat-label">Customers</span>
                                <i class="fas fa-arrow-right"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Charts and Analytics Section -->
                    <div class="dashboard-analytics">
                        <div class="analytics-header">
                            <h2>Analytics & Insights</h2>
                            <div class="analytics-filters">
                                <select id="chart-period" class="chart-period-select">
                                    <option value="7">Last 7 days</option>
                                    <option value="30" selected>Last 30 days</option>
                                    <option value="90">Last 3 months</option>
                                    <option value="365">Last year</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="charts-grid">
                            <div class="chart-container chart-card">
                                <div class="chart-header">
                                    <h3><i class="fas fa-chart-pie"></i> Repair Status Distribution</h3>
                                    <div class="chart-actions">
                                        <button class="chart-action-btn" onclick="exportChart('repairStatusChart')" title="Export Chart">
                                            <i class="fas fa-download"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="chart-content">
                                    <canvas id="repairStatusChart" width="400" height="200"></canvas>
                                </div>
                            </div>

                            <div class="chart-container chart-card">
                                <div class="chart-header">
                                    <h3><i class="fas fa-chart-line"></i> Monthly Revenue Trend</h3>
                                    <div class="chart-actions">
                                        <button class="chart-action-btn" onclick="exportChart('revenueChart')" title="Export Chart">
                                            <i class="fas fa-download"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="chart-content">
                                    <canvas id="revenueChart" width="400" height="200"></canvas>
                                </div>
                            </div>

                            <div class="chart-container chart-card">
                                <div class="chart-header">
                                    <h3><i class="fas fa-chart-bar"></i> Quotation Value Analysis</h3>
                                    <div class="chart-actions">
                                        <button class="chart-action-btn" onclick="exportChart('quotationValueChart')" title="Export Chart">
                                            <i class="fas fa-download"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="chart-content">
                                    <canvas id="quotationValueChart" width="400" height="200"></canvas>
                                </div>
                            </div>

                            <div class="chart-container chart-card">
                                <div class="chart-header">
                                    <h3><i class="fas fa-chart-area"></i> Customer Growth</h3>
                                    <div class="chart-actions">
                                        <button class="chart-action-btn" onclick="exportChart('customerGrowthChart')" title="Export Chart">
                                            <i class="fas fa-download"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="chart-content">
                                    <canvas id="customerGrowthChart" width="400" height="200"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions Section -->
                    <div class="quick-actions-section">
                        <div class="section-header">
                            <h2><i class="fas fa-bolt"></i> Quick Actions</h2>
                            <p>Get things done faster with these shortcuts</p>
                        </div>
                        
                        <div class="quick-actions-grid">
                            <div class="action-category">
                                <h3><i class="fas fa-boxes"></i> Inventory</h3>
                                <div class="action-buttons">
                                    <button class="action-btn action-btn-primary" onclick="showModal('add-item-modal')">
                                        <i class="fas fa-plus"></i> Add Item
                                    </button>
                                    <button class="action-btn action-btn-secondary" onclick="navigateToSection('inventory')">
                                        <i class="fas fa-search"></i> View All
                                    </button>
                                </div>
                            </div>

                            <div class="action-category">
                                <h3><i class="fas fa-shopping-cart"></i> Purchases</h3>
                                <div class="action-buttons">
                                    <button class="action-btn action-btn-primary" onclick="showModal('add-purchase-modal')">
                                        <i class="fas fa-plus"></i> New Purchase
                                    </button>
                                    <button class="action-btn action-btn-secondary" onclick="navigateToSection('purchases')">
                                        <i class="fas fa-list"></i> View All
                                    </button>
                                </div>
                            </div>

                            <div class="action-category">
                                <h3><i class="fas fa-users"></i> People</h3>
                                <div class="action-buttons">
                                    <button class="action-btn action-btn-primary" onclick="showModal('add-vendor-modal')">
                                        <i class="fas fa-user-plus"></i> Add Vendor
                                    </button>
                                    <button class="action-btn action-btn-primary" onclick="showModal('add-customer-modal')">
                                        <i class="fas fa-user-friends"></i> New Customer
                                    </button>
                                </div>
                            </div>

                            <div class="action-category">
                                <h3><i class="fas fa-wrench"></i> Services</h3>
                                <div class="action-buttons">
                                    <button class="action-btn action-btn-primary" onclick="showModal('add-repair-modal')">
                                        <i class="fas fa-plus"></i> New Repair
                                    </button>
                                    <button class="action-btn action-btn-primary" onclick="showModal('add-quotation-modal')">
                                        <i class="fas fa-file-contract"></i> New Quotation
                                    </button>
                                </div>
                            </div>

                            <div class="action-category">
                                <h3><i class="fas fa-file-alt"></i> Documents</h3>
                                <div class="action-buttons">
                                    <button class="action-btn action-btn-primary" onclick="showModal('add-invoice-modal')">
                                        <i class="fas fa-plus"></i> New Invoice
                                    </button>
                                    <button class="action-btn action-btn-secondary" onclick="navigateToSection('invoices')">
                                        <i class="fas fa-list"></i> View All
                                    </button>
                                </div>
                            </div>

                            <div class="action-category">
                                <h3><i class="fas fa-truck"></i> Logistics</h3>
                                <div class="action-buttons">
                                    <button class="action-btn action-btn-primary" onclick="showModal('add-pickdrop-modal')">
                                        <i class="fas fa-plus"></i> New Pick & Drop
                                    </button>
                                    <button class="action-btn action-btn-primary" onclick="showModal('add-delivery-modal')">
                                        <i class="fas fa-plus"></i> New Delivery
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activity Section -->
                    <div class="recent-activity-section">
                        <div class="section-header">
                            <h2><i class="fas fa-history"></i> Recent Activity</h2>
                            <button class="btn btn-secondary" onclick="viewAllActivity()">View All</button>
                        </div>
                        
                        <div class="activity-timeline" id="activity-timeline">
                            <!-- Activity items will be populated by JavaScript -->
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-info-circle"></i>
                                </div>
                                <div class="activity-content">
                                    <p>Loading recent activity...</p>
                                    <span class="activity-time">Just now</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Inventory Section -->
                <section id="inventory" class="content-section">
                    <div class="section-header">
                        <h2>Inventory Management</h2>
                        <button class="btn btn-primary" onclick="showModal('add-item-modal')">
                            <i class="fas fa-plus"></i> Add Item
                        </button>
                    </div>
                    
                    <div class="filters">
                        <select id="category-filter">
                            <option value="">All Categories</option>
                            <option value="laptop-parts">Laptop Parts</option>
                            <option value="mobile-parts">Mobile Parts</option>
                            <option value="tools">Tools</option>
                            <option value="accessories">Accessories</option>
                        </select>
                        <select id="brand-filter">
                            <option value="">All Brands</option>
                            <option value="apple">Apple</option>
                            <option value="samsung">Samsung</option>
                            <option value="hp">HP</option>
                            <option value="dell">Dell</option>
                            <option value="lenovo">Lenovo</option>
                            <option value="asus">ASUS</option>
                            <option value="acer">Acer</option>
                            <option value="xiaomi">Xiaomi</option>
                            <option value="oneplus">OnePlus</option>
                            <option value="google">Google</option>
                            <option value="sony">Sony</option>
                            <option value="lg">LG</option>
                            <option value="generic">Generic/Universal</option>
                            <option value="other">Other</option>
                        </select>
                        <select id="stock-filter">
                            <option value="">All Stock Levels</option>
                            <option value="in-stock">In Stock</option>
                            <option value="low-stock">Low Stock</option>
                            <option value="out-of-stock">Out of Stock</option>
                        </select>
                        <input type="text" id="search-inventory" placeholder="Search items...">
                    </div>
                    
                    <div class="table-container">
                        <table id="inventory-table">
                            <thead>
                                <tr>
                                    <th>Item Name</th>
                                    <th>Category</th>
                                    <th>Brand</th>
                                    <th>Model</th>
                                    <th>SKU</th>
                                    <th>Quantity</th>
                                    <th>Unit</th>
                                    <th>Unit Price</th>
                                    <th>Total Value</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="inventory-tbody">
                                <!-- Inventory items will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Purchases Section -->
                <section id="purchases" class="content-section">
                    <div class="section-header">
                        <h2>Purchase Management</h2>
                        <button class="btn btn-primary" onclick="showModal('add-purchase-modal')">
                            <i class="fas fa-plus"></i> New Purchase
                        </button>
                    </div>
                    
                    <div class="table-container">
                        <table id="purchases-table">
                            <thead>
                                <tr>
                                    <th>Purchase ID</th>
                                    <th>Date</th>
                                    <th>Vendor</th>
                                    <th>Items</th>
                                    <th>Total Amount</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="purchases-tbody">
                                <!-- Purchase orders will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Vendors Section -->
                <section id="vendors" class="content-section">
                    <div class="section-header">
                        <h2>Vendor Management</h2>
                        <button class="btn btn-primary" onclick="showModal('add-vendor-modal')">
                            <i class="fas fa-plus"></i> Add Vendor
                        </button>
                    </div>
                    
                    <div class="vendors-grid" id="vendors-grid">
                        <!-- Vendor cards will be populated by JavaScript -->
                    </div>
                </section>

                <!-- Customers Section -->
                <section id="customers" class="content-section">
                    <div class="section-header">
                        <h2>Customer Management</h2>
                        <button class="btn btn-primary" onclick="showModal('add-customer-modal')">
                            <i class="fas fa-plus"></i> Add Customer
                        </button>
                    </div>
                    
                    <div class="filters">
                        <select id="customer-status-filter">
                            <option value="">All Customers</option>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                        <input type="text" id="search-customers" placeholder="Search customers...">
                    </div>
                    
                    <div class="table-container" id="customers-table-container">
                        <table id="customers-table">
                            <thead>
                                <tr>
                                    <th>Customer ID</th>
                                    <th>Name</th>
                                    <th>Phone</th>
                                    <th>Email</th>
                                    <th>Address</th>
                                    <th>Total Repairs</th>
                                    <th>Last Visit</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="customers-tbody">
                                <!-- Customer data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Customer Detail View -->
                    <div class="customer-detail-view hidden" id="customer-detail-view">
                        <div class="customer-detail-header">
                            <button class="btn btn-secondary back-to-customers-btn" onclick="backToCustomerList()">
                                <i class="fas fa-arrow-left"></i> Back to Customers
                            </button>
                            <h2 id="customer-detail-title">Customer Details</h2>
                        </div>

                        <div class="customer-detail-content">
                            <div class="customer-detail-info">
                                <div class="customer-summary">
                                    <h3 id="customer-display-name">Customer Name</h3>
                                    <p><strong>Customer ID:</strong> <span id="customer-display-id"></span></p>
                                    <p><strong>Status:</strong> <span id="customer-display-status"></span></p>
                                    <p><strong>Preferred Device:</strong> <span id="customer-display-preferred-device"></span></p>
                                    <p><strong>Total Repairs:</strong> <span id="customer-display-total-repairs"></span></p>
                                    <p><strong>Last Visit:</strong> <span id="customer-display-last-visit"></span></p>
                                </div>
                                <div class="customer-contact">
                                    <h4>Contact</h4>
                                    <p><strong>Phone:</strong> <span id="customer-display-phone"></span></p>
                                    <p><strong>Email:</strong> <span id="customer-display-email"></span></p>
                                    <p><strong>Address:</strong> <span id="customer-display-address"></span></p>
                                </div>
                            </div>

                            <div class="customer-repairs">
                                <h4>Recent Repairs</h4>
                                <div class="table-container">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Repair ID</th>
                                                <th>Device</th>
                                                <th>Brand</th>
                                                <th>Model</th>
                                                <th>Issue</th>
                                                <th>Status</th>
                                                <th>Start Date</th>
                                            </tr>
                                        </thead>
                                        <tbody id="customer-repairs-tbody"></tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="customer-actions">
                                <button class="btn btn-secondary" onclick="editCustomerFromDetail()">
                                    <i class="fas fa-edit"></i> Edit Customer
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Repairs Section -->
                <section id="repairs" class="content-section">
                    <div class="section-header">
                        <h2>Repair Management</h2>
                        <button class="btn btn-primary" onclick="showModal('add-repair-modal')">
                            <i class="fas fa-plus"></i> New Repair
                        </button>
                    </div>
                    
                    <div class="table-container" id="repairs-table-container">
                        <table id="repairs-table">
                            <thead>
                                <tr>
                                    <th>Repair ID</th>
                                    <th>Customer</th>
                                    <th>Device Type</th>
                                    <th>Brand</th>
                                    <th>Model</th>
                                    <th>IMEI/Serial</th>
                                    <th>Issue</th>
                                    <th>Status</th>
                                    <th>Start Date</th>
                                    <th>Estimated Completion</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="repairs-tbody">
                                <!-- Repair orders will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Job Card Detail View -->
                    <div class="job-card-detail-view hidden" id="job-card-detail-view">
                        <div class="job-card-detail-header">
                            <button class="btn btn-secondary back-to-repairs-btn" onclick="backToRepairList()">
                                <i class="fas fa-arrow-left"></i> Back to Repairs
                            </button>
                            <h2 id="job-card-detail-title">Job Card Details</h2>
                        </div>
                        
                        <div class="job-card-detail-content">
                            <div class="job-card-detail-info">
                                <div class="job-card-header">
                                    <div class="job-card-company">
                                        <h3>REPAIR MANIAC</h3>
                                        <p>O-109, First Floor, The Shopping Mall</p>
                                        <p>Arjun Marg, DLF City Phase-1</p>
                                        <p>Gurugram, Haryana-122002</p>
                                        <p>Phone: 9560455637</p>
                                        <p>Email: info@repairmaniac.com</p>
                                    </div>
                                    <div class="job-card-details">
                                        <h2 id="job-card-number">JC-0001</h2>
                                        <p><strong>Date:</strong> <span id="job-card-date">2024-01-01</span></p>
                                        <p><strong>Status:</strong> 
                                            <select id="job-card-status-select" onchange="updateJobCardStatusFromDetail()">
                                                <option value="pending">Pending</option>
                                                <option value="in-progress">In Progress</option>
                                                <option value="completed">Completed</option>
                                                <option value="delivered">Delivered</option>
                                                <option value="cancelled">Cancelled</option>
                                            </select>
                                        </p>
                                        <p><strong>Technician:</strong> <span id="job-card-technician">John Doe</span></p>
                                    </div>
                                </div>
                                
                                <div class="job-card-customer">
                                    <h4>Customer Information:</h4>
                                    <p id="job-card-customer-name">Customer Name</p>
                                    <p id="job-card-customer-phone">Customer Phone</p>
                                    <p id="job-card-customer-email">Customer Email</p>
                                    <p id="job-card-customer-address">Customer Address</p>
                                </div>
                                
                                <div class="job-card-device">
                                    <h4>Device Information:</h4>
                                    <p><strong>Device Type:</strong> <span id="job-card-device-type">Laptop</span></p>
                                    <p><strong>Brand:</strong> <span id="job-card-device-brand">Apple</span></p>
                                    <p><strong>Model Number:</strong> <span id="job-card-device-model">MacBook Pro</span></p>
                                    <p><strong>IMEI/Serial Number:</strong> <span id="job-card-serial">SN123456789</span></p>
                                    <p><strong>Issue Reported:</strong> <span id="job-card-issue">Screen replacement needed</span></p>
                                </div>
                                
                                <div class="job-card-diagnosis">
                                    <h4>Technician Diagnosis:</h4>
                                    <div class="diagnosis-content">
                                        <p><strong>Initial Assessment:</strong></p>
                                        <p id="job-card-diagnosis-text">Device shows signs of physical damage. Screen is cracked and unresponsive.</p>
                                        
                                        <p><strong>Required Parts:</strong></p>
                                        <ul id="job-card-parts-list">
                                            <li>LCD Screen Assembly</li>
                                            <li>Screen Protector</li>
                                        </ul>
                                        
                                        <p><strong>Estimated Cost:</strong> <span id="job-card-estimated-cost">â‚¹15,000</span></p>
                                        <p><strong>Estimated Time:</strong> <span id="job-card-estimated-time">2-3 days</span></p>
                                    </div>
                                </div>
                                
                                <div class="job-card-images">
                                    <h4>Device Images:</h4>
                                    <div class="image-management-buttons">
                                        <button class="btn btn-sm btn-info" onclick="addImageToJobCard()">
                                            <i class="fas fa-plus"></i> Add Image
                                        </button>
                                        <button class="btn btn-sm btn-warning" onclick="editJobCardImages()">
                                            <i class="fas fa-edit"></i> Edit Images
                                        </button>
                                    </div>
                                    <div class="device-images-gallery" id="job-card-images-gallery">
                                        <!-- Device images will be displayed here -->
                                    </div>
                                </div>
                                
                                <div class="job-card-progress">
                                    <h4>Repair Progress:</h4>
                                    <div class="progress-timeline">
                                        <div class="progress-step completed">
                                            <div class="step-icon"><i class="fas fa-check"></i></div>
                                            <div class="step-content">
                                                <h5>Device Received</h5>
                                                <p>Device checked in and initial assessment completed</p>
                                                <small>2024-01-01 10:30 AM</small>
                                            </div>
                                        </div>
                                        <div class="progress-step active">
                                            <div class="step-icon"><i class="fas fa-tools"></i></div>
                                            <div class="step-content">
                                                <h5>Repair In Progress</h5>
                                                <p>Parts ordered and repair work started</p>
                                                <small>2024-01-02 09:15 AM</small>
                                            </div>
                                        </div>
                                        <div class="progress-step">
                                            <div class="step-icon"><i class="fas fa-clock"></i></div>
                                            <div class="step-content">
                                                <h5>Quality Testing</h5>
                                                <p>Repair completed, undergoing quality checks</p>
                                                <small>Pending</small>
                                            </div>
                                        </div>
                                        <div class="progress-step">
                                            <div class="step-icon"><i class="fas fa-check-circle"></i></div>
                                            <div class="step-content">
                                                <h5>Ready for Delivery</h5>
                                                <p>Device ready for pickup/delivery</p>
                                                <small>Pending</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="job-card-actions">
                                    <button class="btn btn-primary" onclick="printJobCard()">
                                        <i class="fas fa-print"></i> Print Job Card
                                    </button>
                                    <button class="btn btn-success" onclick="updateJobCardStatus('completed')">
                                        <i class="fas fa-check"></i> Mark as Completed
                                    </button>
                                    <button class="btn btn-info" onclick="updateJobCardStatus('delivered')">
                                        <i class="fas fa-truck"></i> Mark as Delivered
                                    </button>
                                    <button class="btn btn-warning" onclick="addJobCardNote()">
                                        <i class="fas fa-edit"></i> Add Note
                                    </button>
                                    <button class="btn btn-secondary" onclick="qualityCheck()">
                                        <i class="fas fa-clipboard-check"></i> Quality Check
                                    </button>
                                    <button class="btn btn-primary" onclick="readyForDelivery()">
                                        <i class="fas fa-box"></i> Ready for Drop/Delivery
                                    </button>
                                    <button class="btn btn-secondary edit-job-card-btn" onclick="editJobCard()">
                                        <i class="fas fa-edit"></i> Edit Job Card
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Pick & Drop Detail View -->
                <div class="pickdrop-detail-view hidden" id="pickdrop-detail-view">
                    <div class="pickdrop-detail-header">
                        <div class="pickdrop-detail-header-content">
                            <h2>Pick & Drop Details</h2>
                            <button class="btn btn-secondary back-to-pickdrop-btn" onclick="backToPickDropList()">
                                <i class="fas fa-arrow-left"></i> Back to List
                            </button>
                        </div>
                    </div>
                    
                    <div class="pickdrop-detail-content">
                        <div class="pickdrop-detail-info">
                            <div class="pickdrop-header">
                                <div class="pickdrop-company">
                                    <h3>RepairManiac</h3>
                                    <p>O-109, First Floor, The Shopping Mall, Arjun Marg, DLF CIty Phase-1, Gurugram, Haryana-122002</p>
                                    <p>Phone: 9560455637 | Email: info@repairmaniac.com</p>
                                </div>
                                <div class="pickdrop-details">
                                    <h2>Pick & Drop Service</h2>
                                    <p><strong>Service ID:</strong> <span id="pickdrop-service-id">PD-0001</span></p>
                                    <p><strong>Date:</strong> <span id="pickdrop-date">2024-01-01</span></p>
                                    <p><strong>Status:</strong> 
                                        <select id="pickdrop-status-select" onchange="updatePickDropStatusFromDetail()">
                                            <option value="scheduled">Scheduled</option>
                                            <option value="pickup-pending">Pickup Pending</option>
                                            <option value="picked-up">Picked Up</option>
                                            <option value="in-repair">In Repair</option>
                                            <option value="ready-for-delivery">Ready for Delivery</option>
                                            <option value="out-for-delivery">Out for Delivery</option>
                                            <option value="delivered">Delivered</option>
                                            <option value="cancelled">Cancelled</option>
                                        </select>
                                    </p>
                                </div>
                            </div>
                            
                            <div class="pickdrop-customer">
                                <h4>Customer Information:</h4>
                                <p><strong>Name:</strong> <span id="pickdrop-customer-name">Customer Name</span></p>
                                <p><strong>Phone:</strong> <span id="pickdrop-customer-phone">Customer Phone</span></p>
                                <p><strong>Email:</strong> <span id="pickdrop-customer-email">customer@email.com</span></p>
                                <p><strong>Address:</strong> <span id="pickdrop-customer-address">Customer Address</span></p>
                            </div>
                            
                            <div class="pickdrop-device">
                                <h4>Device Information:</h4>
                                <p><strong>Device Type:</strong> <span id="pickdrop-device-type">Laptop</span></p>
                                <p><strong>Brand:</strong> <span id="pickdrop-device-brand">Apple</span></p>
                                <p><strong>Model Number:</strong> <span id="pickdrop-device-model">MacBook Pro</span></p>
                                <p><strong>IMEI/Serial Number:</strong> <span id="pickdrop-device-serial">SN123456789</span></p>
                                <p><strong>Issue:</strong> <span id="pickdrop-device-issue">Screen replacement needed</span></p>
                            </div>
                            
                            <div class="pickdrop-service-details">
                                <h4>Service Details:</h4>
                                <p><strong>Service Type:</strong> <span id="pickdrop-service-type">Pick & Drop</span></p>
                                <p><strong>Pickup Address:</strong> <span id="pickdrop-pickup-address">Customer Address</span></p>
                                <p><strong>Estimated Pickup Time:</strong> <span id="pickdrop-pickup-time">10:00 AM - 12:00 PM</span></p>
                            </div>
                            
                            <div class="pickdrop-otp-section">
                                <h4>OTP Verification:</h4>
                                <div class="otp-status" id="pickdrop-otp-status">
                                    <p><strong>Pickup OTP:</strong> <span id="pickdrop-pickup-otp">Not sent</span></p>
                                </div>
                            </div>
                            
                            <div class="pickdrop-repair-section hidden" id="pickdrop-repair-section">
                                <h4>Repair Information:</h4>
                                <div class="repair-link">
                                    <p><strong>Repair Status:</strong> <span id="pickdrop-repair-status">In Progress</span></p>
                                    <button class="btn btn-success" id="pickdrop-view-repair-btn" onclick="viewJobCardFromPickDrop()">
                                        <i class="fas fa-tools"></i> View Repair Details
                                    </button>
                                </div>
                            </div>
                            
                            <div class="pickdrop-images">
                                <h4>Device Images:</h4>
                                <div class="device-images-gallery" id="pickdrop-images-gallery">
                                    <!-- Device images will be displayed here -->
                                </div>
                            </div>
                            
                            <div class="pickdrop-actions">
                                <button class="btn btn-primary" onclick="printPickDrop()">
                                    <i class="fas fa-print"></i> Print Details
                                </button>
                                <button class="btn btn-success" onclick="sendPickupOTPFromDetail()">
                                    <i class="fas fa-mobile-alt"></i> Send Pickup OTP
                                </button>
                                <button class="btn btn-warning" onclick="addPickDropNote()">
                                    <i class="fas fa-edit"></i> Add Note
                                </button>
                                <button class="btn btn-secondary edit-pickdrop-btn" onclick="editPickDrop()">
                                    <i class="fas fa-edit"></i> Edit Details
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Edit Pick & Drop Modal -->
                <div class="modal" id="edit-pickdrop-modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Edit Pick & Drop Details</h3>
                            <span class="close" onclick="closeEditPickDropModal()">&times;</span>
                        </div>
                        <form id="edit-pickdrop-form" onsubmit="updatePickDropData(event)">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="edit-pickdrop-customer">Customer Name:</label>
                                    <div class="customer-autocomplete">
                                        <input type="text" id="edit-pickdrop-customer" placeholder="Enter customer name" autocomplete="name">
                                        <div class="customer-suggestions" id="edit-pickdrop-customer-suggestions"></div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="edit-pickdrop-phone">Phone:</label>
                                    <input type="text" id="edit-pickdrop-phone" placeholder="Customer phone" autocomplete="tel">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="edit-pickdrop-email">Email:</label>
                                    <input type="email" id="edit-pickdrop-email" placeholder="Customer email" autocomplete="email">
                                </div>
                                <div class="form-group">
                                    <label for="edit-pickdrop-address">Address:</label>
                                    <textarea id="edit-pickdrop-address" placeholder="Customer address" autocomplete="street-address"></textarea>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="edit-pickdrop-device-type">Device Type:</label>
                                    <select id="edit-pickdrop-device-type">
                                        <option value="laptop">Laptop</option>
                                        <option value="mobile">Mobile</option>
                                        <option value="tablet">Tablet</option>
                                        <option value="desktop">Desktop</option>
                                        <option value="printer">Printer</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="edit-pickdrop-brand">Brand:</label>
                                    <input type="text" id="edit-pickdrop-brand" placeholder="Device brand">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="edit-pickdrop-model">Model Number:</label>
                                    <input type="text" id="edit-pickdrop-model" placeholder="Device model">
                                </div>
                                <div class="form-group">
                                    <label for="edit-pickdrop-serial">IMEI/Serial Number:</label>
                                    <input type="text" id="edit-pickdrop-serial" placeholder="IMEI or serial number">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="edit-pickdrop-issue">Issue Description:</label>
                                <textarea id="edit-pickdrop-issue" placeholder="Describe the issue"></textarea>
                            </div>
                            
                                                        <div class="form-group">
                                <label for="edit-pickdrop-pickup-address">Pickup Address:</label>
                                <textarea id="edit-pickdrop-pickup-address" placeholder="Pickup address"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="edit-pickdrop-delivery-address">Delivery Address:</label>
                                <textarea id="edit-pickdrop-delivery-address" placeholder="Delivery address"></textarea>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="edit-pickdrop-pickup-date">Pickup Date:</label>
                                    <input type="date" id="edit-pickdrop-pickup-date">
                                </div>
                                <div class="form-group">
                                    <label for="edit-pickdrop-pickup-time">Pickup Time:</label>
                                    <input type="time" id="edit-pickdrop-pickup-time">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="edit-pickdrop-delivery-date">Delivery Date:</label>
                                    <input type="date" id="edit-pickdrop-delivery-date">
                                </div>
                                <div class="form-group">
                                    <label for="edit-pickdrop-delivery-time">Delivery Time:</label>
                                    <input type="time" id="edit-pickdrop-delivery-time">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="edit-pickdrop-status">Status:</label>
                                    <select id="edit-pickdrop-status">
                                        <option value="scheduled">Scheduled</option>
                                        <option value="pickup-pending">Pickup Pending</option>
                                        <option value="picked-up">Picked Up</option>
                                        <option value="in-repair">In Repair</option>
                                        <option value="completed">Completed</option>
                                        <option value="cancelled">Cancelled</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="edit-pickdrop-fee">Service Fee:</label>
                                    <input type="number" id="edit-pickdrop-fee" placeholder="Service fee" step="0.01">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="edit-pickdrop-instructions">Special Instructions:</label>
                                <textarea id="edit-pickdrop-instructions" placeholder="Any special instructions"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="edit-pickdrop-notes">Notes:</label>
                                <textarea id="edit-pickdrop-notes" placeholder="Additional notes"></textarea>
                            </div>
                            
                            <div class="image-upload-section">
                                <h4>Device Images:</h4>
                                <div class="image-upload-buttons">
                                    <button type="button" class="btn btn-secondary" onclick="captureDeviceImage('edit-pickdrop')">
                                        <i class="fas fa-camera"></i> Capture Photo
                                    </button>
                                    <button type="button" class="btn btn-secondary" onclick="uploadDeviceImage('edit-pickdrop')">
                                        <i class="fas fa-upload"></i> Upload Image
                                    </button>
                                    <input type="file" id="edit-pickdrop-image-input" accept="image/*" class="hidden" onchange="handleImageUpload('edit-pickdrop', this)">
                                </div>
                                <div class="device-images-container" id="edit-pickdrop-images-container">
                                    <!-- Device images will be displayed here -->
                                </div>
                            </div>
                            
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Update Pick & Drop</button>
                                <button type="button" class="btn btn-secondary" onclick="closeEditPickDropModal()">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Delivery Detail View -->
                <div class="delivery-detail-view hidden" id="delivery-detail-view">
                    <div class="delivery-detail-header">
                        <div class="delivery-detail-header-content">
                            <h2>Delivery Details</h2>
                            <button class="btn btn-secondary back-to-delivery-btn" onclick="backToDeliveryList()">
                                <i class="fas fa-arrow-left"></i> Back to List
                            </button>
                        </div>
                    </div>
                    
                    <div class="delivery-detail-content">
                        <div class="delivery-detail-info">
                            <div class="delivery-header">
                                <div class="delivery-company">
                                    <h3>RepairManiac</h3>
                                    <p>O-109, First Floor, The Shopping Mall, Arjun Marg, DLF CIty Phase-1, Gurugram, Haryana-122002</p>
                                    <p>Phone: 9560455637 | Email: info@repairmaniac.com</p>
                                </div>
                                <div class="delivery-details">
                                    <h2>Device Delivery</h2>
                                    <p><strong>Delivery ID:</strong> <span id="delivery-service-id">DL-0001</span></p>
                                    <p><strong>Date:</strong> <span id="delivery-date">2024-01-01</span></p>
                                    <p><strong>Status:</strong> 
                                        <select id="delivery-status-select" onchange="updateDeliveryStatusFromDetail()">
                                            <option value="scheduled">Scheduled</option>
                                            <option value="out-for-delivery">Out for Delivery</option>
                                            <option value="attempted">Attempted</option>
                                            <option value="delivered">Delivered</option>
                                            <option value="failed">Failed</option>
                                            <option value="returned">Returned</option>
                                            <option value="cancelled">Cancelled</option>
                                        </select>
                                    </p>
                                </div>
                            </div>
                            
                            <div class="delivery-customer">
                                <h4>Customer Information:</h4>
                                <p><strong>Name:</strong> <span id="delivery-customer-name">Customer Name</span></p>
                                <p><strong>Phone:</strong> <span id="delivery-customer-phone">Customer Phone</span></p>
                                <p><strong>Email:</strong> <span id="delivery-customer-email">customer@email.com</span></p>
                                <p><strong>Address:</strong> <span id="delivery-customer-address">Customer Address</span></p>
                            </div>
                            
                            <div class="delivery-device">
                                <h4>Device Information:</h4>
                                <p><strong>Device Type:</strong> <span id="delivery-device-type">Laptop</span></p>
                                <p><strong>Brand:</strong> <span id="delivery-device-brand">Apple</span></p>
                                <p><strong>Model Number:</strong> <span id="delivery-device-model">MacBook Pro</span></p>
                                <p><strong>IMEI/Serial Number:</strong> <span id="delivery-device-serial">SN123456789</span></p>
                                <p><strong>Repair ID:</strong> <span id="delivery-repair-id">JC-0001</span></p>
                            </div>
                            
                            <div class="delivery-service-details">
                                <h4>Delivery Details:</h4>
                                <p><strong>Delivery Address:</strong> <span id="delivery-address">Customer Address</span></p>
                                <p><strong>Scheduled Date:</strong> <span id="delivery-scheduled-date">2024-01-01</span></p>
                                <p><strong>Scheduled Time:</strong> <span id="delivery-scheduled-time">10:00 AM - 12:00 PM</span></p>
                                <p><strong>Delivery Agent:</strong> <span id="delivery-agent">Agent Name</span></p>
                                <p><strong>Contact Number:</strong> <span id="delivery-agent-phone">Agent Phone</span></p>
                            </div>
                            
                            <div class="delivery-tracking">
                                <h4>Delivery Tracking:</h4>
                                <div class="delivery-timeline" id="delivery-timeline">
                                    <div class="delivery-step completed">
                                        <div class="step-icon">âœ“</div>
                                        <div class="step-content">
                                            <h5>Delivery Scheduled</h5>
                                            <p>Delivery has been scheduled</p>
                                            <small id="delivery-scheduled-time">2024-01-01 09:00 AM</small>
                                        </div>
                                    </div>
                                    <div class="delivery-step active">
                                        <div class="step-icon">ðŸšš</div>
                                        <div class="step-content">
                                            <h5>Out for Delivery</h5>
                                            <p>Device is out for delivery</p>
                                            <small id="delivery-out-time">-</small>
                                        </div>
                                    </div>
                                    <div class="delivery-step">
                                        <div class="step-icon">ðŸ“¦</div>
                                        <div class="step-content">
                                            <h5>Delivered</h5>
                                            <p>Device has been delivered</p>
                                            <small id="delivery-completed-time">-</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="delivery-actions">
                                <button class="btn btn-primary" onclick="printDelivery()">
                                    <i class="fas fa-print"></i> Print Details
                                </button>
                                <button class="btn btn-success" onclick="markOutForDelivery()">
                                    <i class="fas fa-truck"></i> Mark Out for Delivery
                                </button>
                                <button class="btn btn-info" onclick="markDelivered()">
                                    <i class="fas fa-check"></i> Mark Delivered
                                </button>
                                <button class="btn btn-warning" onclick="markFailed()">
                                    <i class="fas fa-times"></i> Mark Failed
                                </button>
                                <button class="btn btn-secondary" onclick="addDeliveryNote()">
                                    <i class="fas fa-edit"></i> Add Note
                                </button>
                                <button class="btn btn-secondary edit-delivery-btn" onclick="editDelivery()">
                                    <i class="fas fa-edit"></i> Edit Details
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Add Payment Modal -->
                <div id="add-payment-modal" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>New Payment</h3>
                            <span class="close" onclick="closeModal('add-payment-modal')">&times;</span>
                        </div>
                        <form id="add-payment-form" onsubmit="handleAddPayment(event)">
                            <div class="form-group">
                                <label for="payment-invoice">Invoice</label>
                                <select id="payment-invoice" required onchange="updatePaymentCustomer()">
                                    <option value="">Select Invoice</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="payment-customer">Customer</label>
                                <input type="text" id="payment-customer" placeholder="Customer name" readonly>
                            </div>
                            <div class="form-group">
                                <label for="payment-amount">Amount</label>
                                <input type="number" id="payment-amount" placeholder="Payment amount" min="0" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="payment-method">Payment Method</label>
                                <select id="payment-method" required>
                                    <option value="">Select Method</option>
                                    <option value="cash">Cash</option>
                                    <option value="card">Card</option>
                                    <option value="upi">UPI</option>
                                    <option value="bank_transfer">Bank Transfer</option>
                                    <option value="cheque">Cheque</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="payment-date">Payment Date</label>
                                <input type="date" id="payment-date" required>
                            </div>
                            <div class="form-group">
                                <label for="payment-reference">Reference Number</label>
                                <input type="text" id="payment-reference" placeholder="Transaction/Reference number">
                            </div>
                            <div class="form-group">
                                <label for="payment-notes">Notes</label>
                                <textarea id="payment-notes" rows="2" placeholder="Additional payment notes..."></textarea>
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn btn-secondary" onclick="closeModal('add-payment-modal')">Cancel</button>
                                <button type="submit" class="btn btn-primary">Record Payment</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Add Delivery Modal -->
                <div id="add-delivery-modal" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>New Delivery</h3>
                            <span class="close" onclick="closeModal('add-delivery-modal')">&times;</span>
                        </div>
                        <form id="add-delivery-form" onsubmit="handleAddDelivery(event)">
                            <div class="form-group">
                                <label for="delivery-customer">Customer</label>
                                <div class="customer-search-container">
                                    <input type="text" id="delivery-customer" placeholder="Type to search customers..." required>
                                    <div id="delivery-customer-suggestions" class="customer-suggestions"></div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="delivery-repair-id">Repair ID</label>
                                <select id="delivery-repair-id" required>
                                    <option value="">Select Repair</option>
                                </select>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="delivery-device-type">Device Type</label>
                                    <input type="text" id="delivery-device-type" readonly>
                                </div>
                                <div class="form-group">
                                    <label for="delivery-device-brand">Device Brand</label>
                                    <input type="text" id="delivery-device-brand" readonly>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="delivery-device-model">Device Model</label>
                                    <input type="text" id="delivery-device-model" readonly>
                                </div>
                                <div class="form-group">
                                    <label for="delivery-device-serial">IMEI/Serial Number</label>
                                    <input type="text" id="delivery-device-serial" readonly>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="delivery-address">Delivery Address</label>
                                <textarea id="delivery-address" rows="3" placeholder="Enter delivery address..." required></textarea>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="delivery-scheduled-date">Scheduled Date</label>
                                    <input type="date" id="delivery-scheduled-date" required>
                                </div>
                                <div class="form-group">
                                    <label for="delivery-scheduled-time">Scheduled Time</label>
                                    <input type="time" id="delivery-scheduled-time" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="delivery-agent">Delivery Agent</label>
                                    <input type="text" id="delivery-agent" placeholder="Enter delivery agent name" required>
                                </div>
                                <div class="form-group">
                                    <label for="delivery-agent-phone">Agent Contact</label>
                                    <input type="text" id="delivery-agent-phone" placeholder="Enter agent contact number" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="delivery-status">Status</label>
                                    <select id="delivery-status" required>
                                        <option value="scheduled">Scheduled</option>
                                        <option value="out-for-delivery">Out for Delivery</option>
                                        <option value="attempted">Attempted</option>
                                        <option value="delivered">Delivered</option>
                                        <option value="failed">Failed</option>
                                        <option value="returned">Returned</option>
                                        <option value="cancelled">Cancelled</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="delivery-fee">Delivery Fee (â‚¹)</label>
                                    <input type="number" id="delivery-fee" placeholder="0.00" min="0" step="0.01">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="delivery-instructions">Special Instructions</label>
                                <textarea id="delivery-instructions" rows="2" placeholder="Any special instructions for delivery..."></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="delivery-notes">Additional Notes</label>
                                <textarea id="delivery-notes" rows="2" placeholder="Additional notes..."></textarea>
                            </div>
                            
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Create Delivery</button>
                                <button type="button" class="btn btn-secondary" onclick="closeModal('add-delivery-modal')">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Edit Delivery Modal -->
                <div class="modal" id="edit-delivery-modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Edit Delivery Details</h3>
                            <span class="close" onclick="closeEditDeliveryModal()">&times;</span>
                        </div>
                        <form id="edit-delivery-form" onsubmit="updateDeliveryData(event)">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="edit-delivery-customer">Customer Name:</label>
                                    <div class="customer-autocomplete">
                                        <input type="text" id="edit-delivery-customer" placeholder="Enter customer name">
                                        <div class="customer-suggestions" id="edit-delivery-customer-suggestions"></div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="edit-delivery-phone">Phone:</label>
                                    <input type="text" id="edit-delivery-phone" placeholder="Customer phone">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="edit-delivery-email">Email:</label>
                                    <input type="email" id="edit-delivery-email" placeholder="Customer email">
                                </div>
                                <div class="form-group">
                                    <label for="edit-delivery-address">Address:</label>
                                    <textarea id="edit-delivery-address" placeholder="Customer address"></textarea>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="edit-delivery-device-type">Device Type:</label>
                                    <input type="text" id="edit-delivery-device-type" placeholder="Device type">
                                </div>
                                <div class="form-group">
                                    <label for="edit-delivery-brand">Brand:</label>
                                    <input type="text" id="edit-delivery-brand" placeholder="Device brand">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="edit-delivery-model">Model Number:</label>
                                    <input type="text" id="edit-delivery-model" placeholder="Device model">
                                </div>
                                <div class="form-group">
                                    <label for="edit-delivery-serial">IMEI/Serial Number:</label>
                                    <input type="text" id="edit-delivery-serial" placeholder="IMEI or serial number">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="edit-delivery-repair-id">Repair ID:</label>
                                    <input type="text" id="edit-delivery-repair-id" placeholder="Repair ID">
                                </div>
                                <div class="form-group">
                                    <label for="edit-delivery-agent">Delivery Agent:</label>
                                    <input type="text" id="edit-delivery-agent" placeholder="Delivery agent name">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="edit-delivery-agent-phone">Agent Contact:</label>
                                    <input type="text" id="edit-delivery-agent-phone" placeholder="Agent contact number">
                                </div>
                                <div class="form-group">
                                    <label for="edit-delivery-scheduled-date">Scheduled Date:</label>
                                    <input type="date" id="edit-delivery-scheduled-date">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="edit-delivery-scheduled-time">Scheduled Time:</label>
                                    <input type="time" id="edit-delivery-scheduled-time">
                                </div>
                                <div class="form-group">
                                    <label for="edit-delivery-status">Status:</label>
                                    <select id="edit-delivery-status">
                                        <option value="scheduled">Scheduled</option>
                                        <option value="out-for-delivery">Out for Delivery</option>
                                        <option value="attempted">Attempted</option>
                                        <option value="delivered">Delivered</option>
                                        <option value="failed">Failed</option>
                                        <option value="returned">Returned</option>
                                        <option value="cancelled">Cancelled</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="edit-delivery-fee">Delivery Fee:</label>
                                    <input type="number" id="edit-delivery-fee" placeholder="Delivery fee" step="0.01">
                                </div>
                                <div class="form-group">
                                    <label for="edit-delivery-instructions">Instructions:</label>
                                    <textarea id="edit-delivery-instructions" placeholder="Special instructions"></textarea>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="edit-delivery-notes">Notes:</label>
                                <textarea id="edit-delivery-notes" placeholder="Additional notes"></textarea>
                            </div>
                            
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Update Delivery</button>
                                <button type="button" class="btn btn-secondary" onclick="closeEditDeliveryModal()">Cancel</button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Outsource Section -->
                <section id="outsource" class="content-section">
                    <div class="section-header">
                        <h2>Outsource Repair Management</h2>
                        <button class="btn btn-primary" onclick="showModal('add-outsource-modal')">
                            <i class="fas fa-plus"></i> New Outsource
                        </button>
                    </div>
                    
                    <div class="filters">
                        <select id="outsource-status-filter">
                            <option value="">All Status</option>
                            <option value="sent">Sent to Vendor</option>
                            <option value="in-progress">In Progress</option>
                            <option value="completed">Completed</option>
                            <option value="returned">Returned to Customer</option>
                        </select>
                        <select id="outsource-vendor-filter">
                            <option value="">All Vendors</option>
                        </select>
                        <input type="text" id="search-outsource" placeholder="Search outsource repairs...">
                    </div>
                    
                    <div class="table-container">
                        <table id="outsource-table">
                            <thead>
                                <tr>
                                    <th>Outsource ID</th>
                                    <th>Customer</th>
                                    <th>Device Type</th>
                                    <th>Issue</th>
                                    <th>Vendor</th>
                                    <th>Status</th>
                                    <th>Sent Date</th>
                                    <th>Expected Return</th>
                                    <th>Cost</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="outsource-tbody">
                                <!-- Outsource repairs will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Invoices Section -->
                <section id="invoices" class="content-section">
                    <div class="section-header">
                        <h2>Invoice Management</h2>
                        <button class="btn btn-primary" onclick="showModal('add-invoice-modal')">
                            <i class="fas fa-plus"></i> New Invoice
                        </button>
                    </div>
                    
                    <div class="filters">
                        <select id="invoice-status-filter">
                            <option value="">All Status</option>
                            <option value="draft">Draft</option>
                            <option value="sent">Sent</option>
                            <option value="paid">Paid</option>
                            <option value="overdue">Overdue</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                        <select id="invoice-customer-filter">
                            <option value="">All Customers</option>
                        </select>
                        <input type="text" id="search-invoices" placeholder="Search invoices...">
                    </div>
                    
                    <div class="table-container" id="invoices-table-container">
                        <table id="invoices-table">
                            <thead>
                                <tr>
                                    <th>Invoice #</th>
                                    <th>Customer</th>
                                    <th>Date</th>
                                    <th>Due Date</th>
                                    <th>Items</th>
                                    <th>Subtotal</th>
                                    <th>Tax</th>
                                    <th>Total</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="invoices-tbody">
                                <!-- Invoices will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Invoice Detail View -->
                    <div class="invoice-detail-view hidden" id="invoice-detail-view">
                        <div class="invoice-detail-header">
                            <button class="btn btn-secondary back-to-invoices-btn" onclick="backToInvoiceList()">
                                <i class="fas fa-arrow-left"></i> Back to Invoices
                            </button>
                            <h2 id="invoice-detail-title">Invoice Details</h2>
                        </div>
                        
                        <div class="invoice-detail-content">
                            <div class="invoice-detail-info">
                                <div class="invoice-header">
                                    <div class="invoice-company">
                                        <h3>REPAIR MANIAC</h3>
                                        <p>O-109, First Floor, The Shopping Mall</p>
                                        <p>Arjun Marg, DLF City Phase-1</p>
                                        <p>Gurugram, Haryana-122002</p>
                                        <p>Phone: 9560455637</p>
                                    </div>
                                    <div class="invoice-details">
                                        <h2 id="invoice-number">INV-0001</h2>
                                        <p><strong>Date:</strong> <span id="invoice-date">2024-01-01</span></p>
                                        <p><strong>Due Date:</strong> <span id="invoice-due-date">2024-01-08</span></p>
                                        <p><strong>Status:</strong> 
                                            <select id="invoice-status-select" onchange="updateInvoiceStatusFromDetail()">
                                                <option value="draft">Draft</option>
                                                <option value="sent">Sent</option>
                                                <option value="paid">Paid</option>
                                                <option value="overdue">Overdue</option>
                                                <option value="cancelled">Cancelled</option>
                                            </select>
                                        </p>
                                    </div>
                                </div>
                                
                                <div class="invoice-customer">
                                    <h4>Bill To:</h4>
                                    <p id="invoice-customer-name">Customer Name</p>
                                    <p id="invoice-customer-address">Customer Address</p>
                                    <p id="invoice-customer-phone">Customer Phone</p>
                                </div>
                                
                                <div class="invoice-items-detail">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Item/Service</th>
                                                <th>Quantity</th>
                                                <th>Price</th>
                                                <th>Total</th>
                                            </tr>
                                        </thead>
                                        <tbody id="invoice-items-detail-tbody">
                                            <!-- Invoice items will be populated here -->
                                        </tbody>
                                    </table>
                                </div>
                                
                                <div class="invoice-summary-detail">
                                    <div class="invoice-totals-detail">
                                        <p><strong>Subtotal:</strong> <span id="invoice-subtotal">â‚¹0.00</span></p>
                                        <p><strong>Tax (18%):</strong> <span id="invoice-tax">â‚¹0.00</span></p>
                                        <p><strong>Discount:</strong> <span id="invoice-discount">â‚¹0.00</span></p>
                                        <p class="invoice-total"><strong>Total:</strong> <span id="invoice-total-amount">â‚¹0.00</span></p>
                                    </div>
                                </div>
                                
                                <div class="invoice-actions">
                                    <button class="btn btn-primary" onclick="printInvoice()">
                                        <i class="fas fa-print"></i> Print Invoice
                                    </button>
                                    <button class="btn btn-success" onclick="markInvoiceAsPaid()">
                                        <i class="fas fa-check"></i> Mark as Paid
                                    </button>
                                    <button class="btn btn-info" onclick="registerPaymentForInvoice()">
                                        <i class="fas fa-credit-card"></i> Register Payment
                                    </button>
                                    <button class="btn btn-secondary edit-invoice-btn" title="Edit Invoice" onclick="editInvoice()">
                                        <i class="fas fa-edit"></i> Edit Invoice
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Quotations Section -->
                <section id="quotations" class="content-section">
                    <div class="section-header">
                        <h2>Quotation Management</h2>
                        <button class="btn btn-primary" onclick="showModal('add-quotation-modal')">
                            <i class="fas fa-plus"></i> New Quotation
                        </button>
                    </div>
                    
                    <div class="filters">
                        <select id="quotation-status-filter">
                            <option value="">All Status</option>
                            <option value="draft">Draft</option>
                            <option value="sent">Sent</option>
                            <option value="approved">Approved</option>
                            <option value="rejected">Rejected</option>
                            <option value="converted">Converted to Repair</option>
                            <option value="expired">Expired</option>
                        </select>
                        <select id="quotation-customer-filter">
                            <option value="">All Customers</option>
                        </select>
                        <input type="text" id="search-quotations" placeholder="Search quotations...">
                    </div>
                    
                    <div class="table-container" id="quotations-table-container">
                        <table id="quotations-table">
                            <thead>
                                <tr>
                                    <th>Quotation #</th>
                                    <th>Customer</th>
                                    <th>Device</th>
                                    <th>Issue</th>
                                    <th>Date</th>
                                    <th>Valid Until</th>
                                    <th>Subtotal</th>
                                    <th>Total</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="quotations-tbody">
                                <!-- Quotations will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Quotation Detail View -->
                    <div class="quotation-detail-view hidden" id="quotation-detail-view">
                        <div class="quotation-detail-header">
                            <button class="btn btn-secondary back-to-quotations-btn" onclick="backToQuotationList()">
                                <i class="fas fa-arrow-left"></i> Back to Quotations
                            </button>
                            <h2 id="quotation-detail-title">Quotation Details</h2>
                        </div>
                        
                        <div class="quotation-detail-content">
                            <div class="quotation-detail-info">
                                <div class="quotation-header">
                                    <div class="quotation-company">
                                        <h3>REPAIR MANIAC</h3>
                                        <p>O-109, First Floor, The Shopping Mall</p>
                                        <p>Arjun Marg, DLF City Phase-1</p>
                                        <p>Gurugram, Haryana-122002</p>
                                        <p>Phone: 9560455637</p>
                                    </div>
                                    <div class="quotation-details">
                                        <h2 id="quotation-number">QT-0001</h2>
                                        <p><strong>Date:</strong> <span id="quotation-date">2024-01-01</span></p>
                                        <p><strong>Valid Until:</strong> <span id="quotation-valid-until">2024-01-08</span></p>
                                        <p><strong>Status:</strong> 
                                            <select id="quotation-status-select" onchange="updateQuotationStatusFromDetail()">
                                                <option value="draft">Draft</option>
                                                <option value="sent">Sent</option>
                                                <option value="approved">Approved</option>
                                                <option value="rejected">Rejected</option>
                                                <option value="converted">Converted to Repair</option>
                                                <option value="expired">Expired</option>
                                            </select>
                                        </p>
                                    </div>
                                </div>
                                
                                <div class="quotation-customer">
                                    <h4>Customer Details:</h4>
                                    <p id="quotation-customer-name">Customer Name</p>
                                    <p id="quotation-customer-address">Customer Address</p>
                                    <p id="quotation-customer-phone">Customer Phone</p>
                                </div>
                                
                                <div class="quotation-device">
                                    <h4>Device Information:</h4>
                                    <p><strong>Device Type:</strong> <span id="quotation-device-type">Laptop</span></p>
                                    <p><strong>Brand:</strong> <span id="quotation-device-brand">Apple</span></p>
                                    <p><strong>Model:</strong> <span id="quotation-device-model">MacBook Pro</span></p>
                                    <p><strong>Issue:</strong> <span id="quotation-issue">Screen replacement needed</span></p>
                                </div>
                                
                                <div class="quotation-items-detail">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Item/Service</th>
                                                <th>Quantity</th>
                                                <th>Price</th>
                                                <th>Total</th>
                                            </tr>
                                        </thead>
                                        <tbody id="quotation-items-detail-tbody">
                                            <!-- Quotation items will be populated here -->
                                        </tbody>
                                    </table>
                                </div>
                                
                                <div class="quotation-summary-detail">
                                    <div class="quotation-totals-detail">
                                        <p><strong>Subtotal:</strong> <span id="quotation-subtotal">â‚¹0.00</span></p>
                                        <p><strong>Tax (18%):</strong> <span id="quotation-tax">â‚¹0.00</span></p>
                                        <p><strong>Discount:</strong> <span id="quotation-discount">â‚¹0.00</span></p>
                                        <p class="quotation-total"><strong>Total:</strong> <span id="quotation-total-amount">â‚¹0.00</span></p>
                                    </div>
                                </div>
                                
                                <div class="quotation-notes">
                                    <h4>Additional Notes:</h4>
                                    <p id="quotation-notes-text">No additional notes</p>
                                </div>
                                
                                <div class="quotation-actions">
                                    <button class="btn btn-primary" onclick="printQuotation()">
                                        <i class="fas fa-print"></i> Print Quotation
                                    </button>
                                    <button class="btn btn-success" onclick="approveQuotation()">
                                        <i class="fas fa-check"></i> Approve Quotation
                                    </button>
                                    <button class="btn btn-warning" onclick="rejectQuotation()">
                                        <i class="fas fa-times"></i> Reject Quotation
                                    </button>
                                    <button class="btn btn-info" onclick="convertToRepair()">
                                        <i class="fas fa-wrench"></i> Convert to Repair
                                    </button>
                                    <button class="btn btn-secondary edit-quotation-btn" onclick="editQuotation()">
                                        <i class="fas fa-edit"></i> Edit Quotation
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Pick & Drop Section -->
                <section id="pickdrop" class="content-section">
                    <div class="section-header">
                        <h2>Pick & Drop Management</h2>
                        <button class="btn btn-primary" onclick="showModal('add-pickdrop-modal')">
                            <i class="fas fa-plus"></i> New Pick & Drop
                        </button>
                    </div>
                    
                    <div class="filters">
                        <select id="pickdrop-status-filter">
                            <option value="">All Status</option>
                            <option value="scheduled">Scheduled</option>
                            <option value="pickup-pending">Pickup Pending</option>
                            <option value="picked-up">Picked Up</option>
                            <option value="in-repair">In Repair</option>
                            <option value="ready-for-delivery">Ready for Delivery</option>
                            <option value="out-for-delivery">Out for Delivery</option>
                            <option value="delivered">Delivered</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                        <select id="pickdrop-customer-filter">
                            <option value="">All Customers</option>
                        </select>
                        <input type="text" id="search-pickdrop" placeholder="Search pick & drop...">
                    </div>
                    
                    <div class="table-container" id="pickdrops-table-container">
                        <table id="pickdrop-table">
                            <thead>
                                <tr>
                                    <th>Pick & Drop ID</th>
                                    <th>Customer</th>
                                    <th>Device</th>
                                    <th>Pickup Address</th>
                                    <th>Pickup Date</th>
                                    <th>Status</th>
                                    <th>Fee</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="pickdrop-tbody">
                                <!-- Pick & Drop data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Delivery Management Section -->
                <section id="delivery" class="content-section">
                    <div class="section-header">
                        <h2>Delivery Management</h2>
                        <button class="btn btn-primary" onclick="showModal('add-delivery-modal')">
                            <i class="fas fa-plus"></i> New Delivery
                        </button>
                    </div>
                    
                    <div class="filters">
                        <select id="delivery-status-filter">
                            <option value="">All Status</option>
                            <option value="scheduled">Scheduled</option>
                            <option value="out-for-delivery">Out for Delivery</option>
                            <option value="attempted">Attempted</option>
                            <option value="delivered">Delivered</option>
                            <option value="failed">Failed</option>
                            <option value="returned">Returned</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                        <select id="delivery-customer-filter">
                            <option value="">All Customers</option>
                        </select>
                        <input type="text" id="search-delivery" placeholder="Search deliveries...">
                    </div>
                    
                    <div class="table-container" id="delivery-table-container">
                        <table id="delivery-table">
                            <thead>
                                <tr>
                                    <th>Delivery ID</th>
                                    <th>Customer</th>
                                    <th>Device</th>
                                    <th>Repair ID</th>
                                    <th>Delivery Address</th>
                                    <th>Scheduled Date</th>
                                    <th>Status</th>
                                    <th>Delivery Agent</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="delivery-tbody">
                                <!-- Delivery data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Payment Management Section -->
                <section id="payments" class="content-section">
                    <div class="section-header">
                        <h2>Payment Management</h2>
                        <button class="btn btn-primary" onclick="showModal('add-payment-modal')">
                            <i class="fas fa-plus"></i> New Payment
                        </button>
                    </div>
                    
                    <div class="filters">
                        <select id="payment-status-filter">
                            <option value="">All Status</option>
                            <option value="pending">Pending</option>
                            <option value="completed">Completed</option>
                            <option value="failed">Failed</option>
                            <option value="refunded">Refunded</option>
                        </select>
                        <select id="payment-method-filter">
                            <option value="">All Methods</option>
                            <option value="cash">Cash</option>
                            <option value="card">Card</option>
                            <option value="upi">UPI</option>
                            <option value="bank_transfer">Bank Transfer</option>
                            <option value="cheque">Cheque</option>
                        </select>
                        <select id="payment-customer-filter">
                            <option value="">All Customers</option>
                        </select>
                        <input type="text" id="search-payments" placeholder="Search payments...">
                    </div>
                    
                    <div class="table-container" id="payments-table-container">
                        <table id="payments-table">
                            <thead>
                                <tr>
                                    <th>Payment ID</th>
                                    <th>Invoice #</th>
                                    <th>Customer</th>
                                    <th>Amount</th>
                                    <th>Method</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Reference</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="payments-tbody">
                                <!-- Payments will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Payment Summary Cards -->
                    <div class="payment-summary-cards">
                        <div class="summary-card">
                            <h3>Total Payments</h3>
                            <p id="total-payments-amount">â‚¹0.00</p>
                        </div>
                        <div class="summary-card">
                            <h3>Pending Payments</h3>
                            <p id="pending-payments-amount">â‚¹0.00</p>
                        </div>
                        <div class="summary-card">
                            <h3>This Month</h3>
                            <p id="monthly-payments-amount">â‚¹0.00</p>
                        </div>
                        <div class="summary-card">
                            <h3>Overdue Amount</h3>
                            <p id="overdue-payments-amount">â‚¹0.00</p>
                        </div>
                    </div>
                </section>

                <!-- Warranties Section -->
                <section id="warranties" class="content-section">
                    <div class="section-header">
                        <h2>Warranty Management</h2>
                    </div>
                    
                    <div class="filters">
                        <select id="warranty-status-filter">
                            <option value="">All Status</option>
                            <option value="active">Active</option>
                            <option value="expired">Expired</option>
                            <option value="expiring-soon">Expiring Soon</option>
                        </select>
                        <select id="warranty-type-filter">
                            <option value="">All Types</option>
                            <option value="repair">Repair Warranty</option>
                            <option value="parts">Parts Warranty</option>
                        </select>
                        <input type="text" id="search-warranties" placeholder="Search warranties...">
                    </div>
                    
                    <div class="table-container" id="warranties-table-container">
                        <table id="warranties-table">
                            <thead>
                                <tr>
                                    <th>Warranty ID</th>
                                    <th>Type</th>
                                    <th>Customer</th>
                                    <th>Item/Service</th>
                                    <th>Duration</th>
                                    <th>Start Date</th>
                                    <th>Expiry Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="warranties-tbody">
                                <!-- Warranties will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Warranty Detail View -->
                    <div class="warranty-detail-view hidden" id="warranty-detail-view">
                        <div class="warranty-detail-header">
                            <button class="btn btn-secondary back-to-warranties-btn" onclick="backToWarrantyList()">
                                <i class="fas fa-arrow-left"></i> Back to Warranties
                            </button>
                            <h3 id="warranty-detail-title">Warranty Details</h3>
                        </div>
                        
                        <div class="warranty-detail-content">
                            <div class="warranty-detail-grid">
                                <div class="warranty-detail-section">
                                    <h4>Warranty Information</h4>
                                    <div class="detail-row">
                                        <span class="detail-label">Warranty ID:</span>
                                        <span class="detail-value" id="warranty-detail-id">-</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Type:</span>
                                        <span class="detail-value" id="warranty-detail-type">-</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Duration:</span>
                                        <span class="detail-value" id="warranty-detail-duration">-</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Start Date:</span>
                                        <span class="detail-value" id="warranty-detail-start-date">-</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Expiry Date:</span>
                                        <span class="detail-value" id="warranty-detail-expiry-date">-</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Status:</span>
                                        <span class="detail-value" id="warranty-detail-status">-</span>
                                    </div>
                                </div>
                                
                                <div class="warranty-detail-section">
                                    <h4>Customer Information</h4>
                                    <div class="detail-row">
                                        <span class="detail-label">Customer Name:</span>
                                        <span class="detail-value" id="warranty-detail-customer">-</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Customer Phone:</span>
                                        <span class="detail-value" id="warranty-detail-customer-phone">-</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Customer Email:</span>
                                        <span class="detail-value" id="warranty-detail-customer-email">-</span>
                                    </div>
                                </div>
                                
                                <div class="warranty-detail-section">
                                    <h4>Item/Service Details</h4>
                                    <div class="detail-row">
                                        <span class="detail-label">Item/Service:</span>
                                        <span class="detail-value" id="warranty-detail-item">-</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Source:</span>
                                        <span class="detail-value" id="warranty-detail-source">-</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Source ID:</span>
                                        <span class="detail-value" id="warranty-detail-source-id">-</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="warranty-detail-actions">
                                <button class="btn btn-info" id="warranty-detail-view-source-btn" onclick="viewWarrantySource()">
                                    <i class="fas fa-external-link-alt"></i> View Source
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Warranty Summary Cards -->
                    <div class="warranty-summary-cards">
                        <div class="summary-card">
                            <h3>Active Warranties</h3>
                            <p id="active-warranties-count">0</p>
                        </div>
                        <div class="summary-card">
                            <h3>Expiring Soon</h3>
                            <p id="expiring-warranties-count">0</p>
                        </div>
                        <div class="summary-card">
                            <h3>Expired</h3>
                            <p id="expired-warranties-count">0</p>
                        </div>
                        <div class="summary-card">
                            <h3>Total Warranties</h3>
                            <p id="total-warranties-count">0</p>
                        </div>
                    </div>
                </section>

                <!-- Reports Section -->
                <section id="reports" class="content-section">
                    <div class="section-header">
                        <h2>Reports & Analytics</h2>
                    </div>
                    
                    <div class="reports-grid">
                        <div class="report-card">
                            <h3>Inventory Value Report</h3>
                            <div class="report-content">
                                <p>Total Inventory Value: <span id="total-inventory-value">$0</span></p>
                                <p>Average Item Price: <span id="avg-item-price">$0</span></p>
                            </div>
                        </div>
                        <div class="report-card">
                            <h3>Purchase Summary</h3>
                            <div class="report-content">
                                <p>Total Purchases: <span id="total-purchases">0</span></p>
                                <p>Total Spent: <span id="total-spent">$0</span></p>
                            </div>
                        </div>
                        <div class="report-card">
                            <h3>Repair Summary</h3>
                            <div class="report-content">
                                <p>Active Repairs: <span id="active-repairs-count">0</span></p>
                                <p>Completed This Month: <span id="completed-repairs">0</span></p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- User Management Section -->
                <section id="users" class="content-section">
                    <div class="section-header">
                        <h2>User Management</h2>
                        <button class="btn btn-primary" onclick="showModal('add-user-modal')">
                            <i class="fas fa-plus"></i> Add User
                        </button>
                    </div>
                    
                    <div class="filters">
                        <select id="user-role-filter">
                            <option value="">All Roles</option>
                            <option value="admin">Admin</option>
                            <option value="manager">Manager</option>
                            <option value="technician">Technician</option>
                            <option value="sales">Sales</option>
                            <option value="viewer">Viewer</option>
                        </select>
                        <select id="user-status-filter">
                            <option value="">All Status</option>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                        <input type="text" id="search-users" placeholder="Search users...">
                    </div>
                    
                    <div class="table-container">
                        <table id="users-table">
                            <thead>
                                <tr>
                                    <th>Username</th>
                                    <th>Full Name</th>
                                    <th>Email</th>
                                    <th>Role</th>
                                    <th>Permissions</th>
                                    <th>Last Login</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="users-tbody">
                                <!-- User data will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <!-- Add Item Modal -->
    <div id="add-item-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Item</h3>
                <span class="close" onclick="closeModal('add-item-modal')">&times;</span>
            </div>
            <form id="add-item-form">
                <div class="form-group">
                    <label for="item-name">Item Name</label>
                    <input type="text" id="item-name" required>
                </div>
                <div class="form-group">
                    <label for="item-category">Category</label>
                    <select id="item-category" required>
                        <option value="">Select Category</option>
                        <option value="laptop-parts">Laptop Parts</option>
                        <option value="mobile-parts">Mobile Parts</option>
                        <option value="tools">Tools</option>
                        <option value="accessories">Accessories</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="item-brand">Brand</label>
                        <select id="item-brand" required>
                            <option value="">Select Brand</option>
                            <option value="apple">Apple</option>
                            <option value="samsung">Samsung</option>
                            <option value="hp">HP</option>
                            <option value="dell">Dell</option>
                            <option value="lenovo">Lenovo</option>
                            <option value="asus">ASUS</option>
                            <option value="acer">Acer</option>
                            <option value="xiaomi">Xiaomi</option>
                            <option value="oneplus">OnePlus</option>
                            <option value="google">Google</option>
                            <option value="sony">Sony</option>
                            <option value="lg">LG</option>
                            <option value="generic">Generic/Universal</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="item-model">Model</label>
                        <input type="text" id="item-model" placeholder="e.g., iPhone 13, MacBook Pro, Galaxy S21">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="item-sku">SKU</label>
                        <input type="text" id="item-sku" required>
                    </div>
                    <div class="form-group">
                        <label for="item-quantity">Quantity</label>
                        <input type="number" id="item-quantity" min="0" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="item-unit">Unit</label>
                        <select id="item-unit" required>
                            <option value="">Select Unit</option>
                            <option value="pcs">Pieces</option>
                            <option value="kg">Kilograms</option>
                            <option value="g">Grams</option>
                            <option value="l">Liters</option>
                            <option value="ml">Milliliters</option>
                            <option value="m">Meters</option>
                            <option value="cm">Centimeters</option>
                            <option value="box">Box</option>
                            <option value="pack">Pack</option>
                            <option value="set">Set</option>
                            <option value="pair">Pair</option>
                            <option value="roll">Roll</option>
                            <option value="sheet">Sheet</option>
                            <option value="bottle">Bottle</option>
                            <option value="can">Can</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="item-price">Unit Price (â‚¹)</label>
                        <input type="number" id="item-price" min="0" step="0.01" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="item-description">Description</label>
                    <textarea id="item-description" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('add-item-modal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Item</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Purchase Modal -->
    <div id="add-purchase-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>New Purchase Order</h3>
                <span class="close" onclick="closeModal('add-purchase-modal')">&times;</span>
            </div>
            <form id="add-purchase-form">
                <div class="form-group">
                    <label for="purchase-vendor">Vendor</label>
                    <select id="purchase-vendor" required>
                        <option value="">Select Vendor</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="purchase-date">Purchase Date</label>
                    <input type="date" id="purchase-date" required>
                </div>
                <div class="purchase-items">
                    <h4>Purchase Items</h4>
                    <div id="purchase-items-list">
                        <div class="purchase-item">
                            <select class="purchase-item-select" required title="Select purchase item">
                                <option value="">Select Item</option>
                            </select>
                            <input type="number" class="purchase-quantity" placeholder="Qty" min="1" required>
                            <input type="number" class="purchase-price" placeholder="Price" min="0" step="0.01" required>
                            <button type="button" class="btn btn-danger btn-sm" onclick="removePurchaseItem(this)">Remove</button>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary" onclick="addPurchaseItem()">Add Item</button>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('add-purchase-modal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Create Purchase</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Vendor Modal -->
    <div id="add-vendor-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Vendor</h3>
                <span class="close" onclick="closeModal('add-vendor-modal')">&times;</span>
            </div>
            <form id="add-vendor-form">
                <div class="form-group">
                    <label for="vendor-name">Vendor Name</label>
                    <input type="text" id="vendor-name" autocomplete="organization" required>
                </div>
                <div class="form-group">
                    <label for="vendor-email">Email</label>
                    <input type="email" id="vendor-email" autocomplete="email" required>
                </div>
                <div class="form-group">
                    <label for="vendor-phone">Phone</label>
                    <input type="tel" id="vendor-phone" autocomplete="tel" required>
                </div>
                <div class="form-group">
                    <label for="vendor-address">Address</label>
                    <textarea id="vendor-address" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('add-vendor-modal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Vendor</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Customer Modal -->
    <div id="add-customer-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New Customer</h3>
                <span class="close" onclick="closeModal('add-customer-modal')">&times;</span>
            </div>
            <form id="add-customer-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="customer-name">Full Name</label>
                        <input type="text" id="customer-name" autocomplete="name" required>
                    </div>
                    <div class="form-group">
                        <label for="customer-phone">Phone Number</label>
                        <input type="tel" id="customer-phone" autocomplete="tel" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="customer-email">Email Address</label>
                    <input type="email" id="customer-email" autocomplete="email">
                </div>
                <div class="form-group">
                    <label for="customer-address">Address</label>
                    <textarea id="customer-address" rows="3" autocomplete="street-address"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="customer-preferred-device">Preferred Device Type</label>
                        <select id="customer-preferred-device">
                            <option value="">Select Device Type</option>
                            <option value="laptop">Laptop</option>
                            <option value="mobile">Mobile Phone</option>
                            <option value="tablet">Tablet</option>
                            <option value="desktop">Desktop</option>
                            <option value="multiple">Multiple Types</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="customer-status">Status</label>
                        <select id="customer-status" required>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="customer-notes">Notes</label>
                    <textarea id="customer-notes" rows="3" placeholder="Any special notes about the customer..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('add-customer-modal')">Cancel</button>
                    <button id="add-customer-submit" type="submit" class="btn btn-primary">Add Customer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Repair Modal -->
    <div id="add-repair-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>New Repair Order</h3>
                <span class="close" onclick="closeModal('add-repair-modal')">&times;</span>
            </div>
            <form id="add-repair-form">
                <div class="form-group">
                    <label for="repair-customer">Customer Name</label>
                    <div class="customer-autocomplete">
                        <input type="text" id="repair-customer" placeholder="Start typing customer name..." required>
                        <div class="customer-suggestions" id="repair-customer-suggestions"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="repair-device">Device Type</label>
                    <select id="repair-device" required>
                        <option value="">Select Device</option>
                        <option value="laptop">Laptop</option>
                        <option value="mobile">Mobile Phone</option>
                        <option value="tablet">Tablet</option>
                        <option value="desktop">Desktop</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="repair-brand">Brand</label>
                        <input type="text" id="repair-brand" placeholder="e.g., Apple, Samsung, HP, Dell" required>
                    </div>
                    <div class="form-group">
                        <label for="repair-model">Model Number</label>
                        <input type="text" id="repair-model" placeholder="e.g., iPhone 13, MacBook Pro, Galaxy S21" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="repair-serial">IMEI/Serial Number</label>
                    <input type="text" id="repair-serial" placeholder="Enter IMEI or Serial Number" required>
                </div>
                <div class="form-group">
                    <label for="repair-issue">Issue Description</label>
                    <textarea id="repair-issue" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label for="repair-diagnosis">Technical Diagnosis</label>
                    <textarea id="repair-diagnosis" rows="3" placeholder="Enter initial technical assessment..."></textarea>
                </div>
                <div class="form-group">
                    <label for="repair-estimate">Estimated Completion (days)</label>
                    <input type="number" id="repair-estimate" min="1" required>
                </div>
                <div class="form-group">
                    <label>Device Images</label>
                    <div class="image-upload-section">
                        <div class="image-upload-buttons">
                            <button type="button" class="btn btn-secondary" onclick="captureDeviceImage('repair')">
                                <i class="fas fa-camera"></i> Capture Photo
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="uploadDeviceImage('repair')">
                                <i class="fas fa-upload"></i> Upload Image
                            </button>
                        </div>
                        <input type="file" id="repair-image-input" accept="image/*" class="hidden" onchange="handleImageUpload('repair', this)">
                        <div class="device-images-container" id="repair-images-container">
                            <!-- Captured/uploaded images will be displayed here -->
                        </div>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('add-repair-modal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Create Repair</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Outsource Modal -->
    <div id="add-outsource-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>New Outsource Repair</h3>
                <span class="close" onclick="closeModal('add-outsource-modal')">&times;</span>
            </div>
            <form id="add-outsource-form">
                <div class="form-group">
                    <label for="outsource-customer">Customer Name</label>
                    <div class="customer-search-container">
                        <input type="text" id="outsource-customer" placeholder="Type to search customers..." required>
                        <div id="customer-suggestions" class="customer-suggestions"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="outsource-device">Device Type</label>
                    <select id="outsource-device" required>
                        <option value="">Select Device</option>
                        <option value="laptop">Laptop</option>
                        <option value="mobile">Mobile Phone</option>
                        <option value="tablet">Tablet</option>
                        <option value="desktop">Desktop</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="outsource-issue">Issue Description</label>
                    <textarea id="outsource-issue" rows="3" required></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="outsource-vendor">Vendor</label>
                        <select id="outsource-vendor" required>
                            <option value="">Select Vendor</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="outsource-cost">Vendor Cost (â‚¹)</label>
                        <input type="number" id="outsource-cost" min="0" step="0.01" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="outsource-expected-return">Expected Return Date</label>
                    <input type="date" id="outsource-expected-return" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('add-outsource-modal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Create Outsource</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Invoice Modal -->
    <div id="add-invoice-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>New Invoice</h3>
                <span class="close" onclick="closeModal('add-invoice-modal')">&times;</span>
            </div>
            <form id="add-invoice-form">
                <div class="form-group">
                    <label for="invoice-customer">Customer</label>
                    <div class="customer-search-container">
                        <input type="text" id="invoice-customer" placeholder="Type to search customers..." required>
                        <div id="invoice-customer-suggestions" class="customer-suggestions"></div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="invoice-date">Invoice Date</label>
                        <input type="date" id="invoice-date" required>
                    </div>
                    <div class="form-group">
                        <label for="invoice-due-date">Due Date</label>
                        <input type="date" id="invoice-due-date" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="invoice-notes">Notes</label>
                    <textarea id="invoice-notes" rows="2" placeholder="Additional notes for the invoice..."></textarea>
                </div>
                <div class="invoice-items">
                    <h4>Invoice Items</h4>
                    <div id="invoice-items-list">
                        <div class="invoice-item">
                            <div class="item-search-container">
                                <input type="text" class="invoice-item-name" placeholder="Type to search items..." required>
                                <div class="item-suggestions"></div>
                            </div>
                            <input type="number" class="invoice-quantity" placeholder="Qty" min="1" value="1" required>
                            <input type="number" class="invoice-price" placeholder="Price" min="0" step="0.01" required>
                                 <select class="invoice-warranty-months" title="Warranty (months)">
                                     <option value="0">No Warranty</option>
                                     <option value="1">1 month</option>
                                     <option value="3">3 months</option>
                                     <option value="6">6 months</option>
                                     <option value="12">12 months</option>
                                 </select>
                            <button type="button" class="btn btn-danger btn-sm" onclick="removeInvoiceItem(this)">Remove</button>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary" onclick="addInvoiceItem()">Add Item</button>
                </div>
                <div class="invoice-summary">
                    <div class="form-row">
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="invoice-apply-tax" checked>
                                Apply Tax
                            </label>
                        </div>
                        <div class="form-group">
                            <label for="invoice-discount">Discount (â‚¹)</label>
                            <input type="number" id="invoice-discount" min="0" step="0.01" value="0">
                        </div>
                    </div>
                    <div class="form-row" id="invoice-tax-row">
                        <div class="form-group">
                            <label for="invoice-tax-rate">Tax Rate (%)</label>
                            <input type="number" id="invoice-tax-rate" min="0" max="100" step="0.01" value="18">
                        </div>
                    </div>
                    <div class="invoice-totals">
                        <p><strong>Subtotal: â‚¹<span id="invoice-subtotal">0.00</span></strong></p>
                        <p id="invoice-tax-line"><strong>Tax: â‚¹<span id="invoice-tax-amount">0.00</span></strong></p>
                        <p><strong>Discount: â‚¹<span id="invoice-discount-amount">0.00</span></strong></p>
                        <p><strong>Total: â‚¹<span id="invoice-total">0.00</span></strong></p>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('add-invoice-modal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Create Invoice</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Quotation Modal -->
    <div id="add-quotation-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>New Quotation</h3>
                <span class="close" onclick="closeModal('add-quotation-modal')">&times;</span>
            </div>
            <form id="add-quotation-form">
                <div class="form-group">
                    <label for="quotation-customer">Customer</label>
                    <div class="customer-search-container">
                        <input type="text" id="quotation-customer" placeholder="Type to search customers..." required>
                        <div id="quotation-customer-suggestions" class="customer-suggestions"></div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="quotation-device-type">Device Type</label>
                        <select id="quotation-device-type" required>
                            <option value="">Select Device</option>
                            <option value="laptop">Laptop</option>
                            <option value="mobile">Mobile Phone</option>
                            <option value="tablet">Tablet</option>
                            <option value="desktop">Desktop</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="quotation-device-brand">Device Brand</label>
                        <input type="text" id="quotation-device-brand" placeholder="e.g., Apple, Samsung, HP">
                    </div>
                </div>
                <div class="form-group">
                    <label for="quotation-device-model">Device Model</label>
                    <input type="text" id="quotation-device-model" placeholder="e.g., iPhone 13, MacBook Pro">
                </div>
                <div class="form-group">
                    <label for="quotation-issue">Issue Description</label>
                    <textarea id="quotation-issue" rows="3" placeholder="Describe the problem..." required></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="quotation-date">Quotation Date</label>
                        <input type="date" id="quotation-date" required>
                    </div>
                    <div class="form-group">
                        <label for="quotation-valid-until">Valid Until</label>
                        <input type="date" id="quotation-valid-until" required>
                    </div>
                </div>
                <div class="quotation-items">
                    <h4>Quotation Items</h4>
                    <div id="quotation-items-list">
                        <div class="quotation-item">
                            <div class="item-search-container">
                                <input type="text" class="quotation-item-name" placeholder="Type to search items..." required>
                                <div class="item-suggestions"></div>
                            </div>
                            <input type="number" class="quotation-quantity" placeholder="Qty" min="1" value="1" required>
                            <input type="number" class="quotation-price" placeholder="Price" min="0" step="0.01" required>
                            <button type="button" class="btn btn-danger btn-sm" onclick="removeQuotationItem(this)">Remove</button>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary" onclick="addQuotationItem()">Add Item</button>
                </div>
                <div class="quotation-summary">
                    <div class="form-row">
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="quotation-apply-tax" checked>
                                Apply Tax
                            </label>
                        </div>
                        <div class="form-group">
                            <label for="quotation-discount">Discount (â‚¹)</label>
                            <input type="number" id="quotation-discount" min="0" step="0.01" value="0">
                        </div>
                    </div>
                    <div class="form-row" id="quotation-tax-row">
                        <div class="form-group">
                            <label for="quotation-tax-rate">Tax Rate (%)</label>
                            <input type="number" id="quotation-tax-rate" min="0" max="100" step="0.01" value="18">
                        </div>
                    </div>
                    <div class="quotation-totals">
                        <p><strong>Subtotal: â‚¹<span id="quotation-subtotal">0.00</span></strong></p>
                        <p id="quotation-tax-line"><strong>Tax: â‚¹<span id="quotation-tax-amount">0.00</span></strong></p>
                        <p><strong>Discount: â‚¹<span id="quotation-discount-amount">0.00</span></strong></p>
                        <p><strong>Total: â‚¹<span id="quotation-total">0.00</span></strong></p>
                    </div>
                </div>
                <div class="form-group">
                    <label for="quotation-notes">Additional Notes</label>
                    <textarea id="quotation-notes" rows="2" placeholder="Terms, conditions, or additional notes..."></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('add-quotation-modal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Create Quotation</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Pick & Drop Modal -->
    <div id="add-pickdrop-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>New Pick & Drop</h3>
                <span class="close" onclick="closeModal('add-pickdrop-modal')">&times;</span>
            </div>
            <form id="add-pickdrop-form">
                <div class="form-group">
                    <label for="pickdrop-customer">Customer</label>
                    <div class="customer-search-container">
                        <input type="text" id="pickdrop-customer" placeholder="Type to search customers..." required>
                        <div id="pickdrop-customer-suggestions" class="customer-suggestions"></div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="pickdrop-device-type">Device Type</label>
                        <select id="pickdrop-device-type" required>
                            <option value="">Select Device</option>
                            <option value="laptop">Laptop</option>
                            <option value="mobile">Mobile Phone</option>
                            <option value="tablet">Tablet</option>
                            <option value="desktop">Desktop</option>
                            <option value="printer">Printer</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="pickdrop-device-brand">Device Brand</label>
                        <input type="text" id="pickdrop-device-brand" placeholder="e.g., Apple, Samsung, HP">
                    </div>
                </div>
                <div class="form-group">
                    <label for="pickdrop-device-model">Device Model</label>
                    <input type="text" id="pickdrop-device-model" placeholder="e.g., iPhone 13, MacBook Pro">
                </div>
                <div class="form-group">
                    <label for="pickdrop-device-serial">Device Serial/IMEI</label>
                    <input type="text" id="pickdrop-device-serial" placeholder="e.g., SN123456789, IMEI123456789">
                </div>
                <div class="form-group">
                    <label for="pickdrop-device-issue">Device Issue</label>
                    <textarea id="pickdrop-device-issue" rows="2" placeholder="Describe the device issue..."></textarea>
                </div>
                <div class="form-group">
                    <label for="pickdrop-pickup-address">Pickup Address</label>
                    <textarea id="pickdrop-pickup-address" rows="3" placeholder="Enter pickup address..." required></textarea>
                </div>
                <div class="form-group">
                    <label for="pickdrop-delivery-address">Delivery Address</label>
                    <textarea id="pickdrop-delivery-address" rows="3" placeholder="Enter delivery address..."></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="pickdrop-pickup-date">Pickup Date</label>
                        <input type="date" id="pickdrop-pickup-date" required>
                    </div>
                    <div class="form-group">
                        <label for="pickdrop-pickup-time">Pickup Time</label>
                        <input type="time" id="pickdrop-pickup-time" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="pickdrop-delivery-date">Delivery Date</label>
                        <input type="date" id="pickdrop-delivery-date">
                    </div>
                    <div class="form-group">
                        <label for="pickdrop-delivery-time">Delivery Time</label>
                        <input type="time" id="pickdrop-delivery-time">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="pickdrop-fee">Pick & Drop Fee (â‚¹)</label>
                        <input type="number" id="pickdrop-fee" placeholder="0.00" min="0" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="pickdrop-status">Status</label>
                        <select id="pickdrop-status" required>
                            <option value="scheduled">Scheduled</option>
                            <option value="pickup-pending">Pickup Pending</option>
                            <option value="picked-up">Picked Up</option>
                            <option value="in-repair">In Repair</option>
                            <option value="completed">Completed</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="pickdrop-instructions">Special Instructions</label>
                    <textarea id="pickdrop-instructions" rows="2" placeholder="Any special instructions for pickup/delivery..."></textarea>
                </div>
                <div class="form-group">
                    <label for="pickdrop-notes">Additional Notes</label>
                    <textarea id="pickdrop-notes" rows="2" placeholder="Additional notes..."></textarea>
                </div>
                <div class="form-group">
                    <label>Device Images</label>
                    <div class="image-upload-section">
                        <div class="image-upload-buttons">
                            <button type="button" class="btn btn-secondary" onclick="captureDeviceImage('pickdrop')">
                                <i class="fas fa-camera"></i> Capture Photo
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="uploadDeviceImage('pickdrop')">
                                <i class="fas fa-upload"></i> Upload Image
                            </button>
                        </div>
                        <input type="file" id="pickdrop-image-input" accept="image/*" class="hidden" onchange="handleImageUpload('pickdrop', this)">
                        <div class="device-images-container" id="pickdrop-images-container">
                            <!-- Captured/uploaded images will be displayed here -->
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="pickdrop-otp-enabled">Enable OTP Verification</label>
                    <div class="checkbox-container">
                        <input type="checkbox" id="pickdrop-otp-enabled" checked>
                        <span class="checkbox-label">Send OTP for pickup and delivery verification</span>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('add-pickdrop-modal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Create Pick & Drop</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add User Modal -->
    <div id="add-user-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New User</h3>
                <span class="close" onclick="resetUserModal()">&times;</span>
            </div>
            <form id="add-user-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="user-username">Username</label>
                        <input type="text" id="user-username" autocomplete="username" required>
                    </div>
                    <div class="form-group">
                        <label for="user-password">Password</label>
                        <input type="password" id="user-password" placeholder="Leave blank to keep current password when editing" autocomplete="new-password">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="user-fullname">Full Name</label>
                        <input type="text" id="user-fullname" autocomplete="name" required>
                    </div>
                    <div class="form-group">
                        <label for="user-email">Email</label>
                        <input type="email" id="user-email" autocomplete="email" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="user-role">Role</label>
                        <select id="user-role" required>
                            <option value="">Select Role</option>
                            <option value="admin">Admin</option>
                            <option value="manager">Manager</option>
                            <option value="technician">Technician</option>
                            <option value="sales">Sales</option>
                            <option value="viewer">Viewer</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="user-status">Status</label>
                        <select id="user-status" required>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Module Permissions</label>
                    <div class="permissions-grid">
                        <div class="permission-item">
                            <input type="checkbox" id="perm-dashboard" checked>
                            <label for="perm-dashboard">Dashboard</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm-inventory" checked>
                            <label for="perm-inventory">Inventory</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm-purchases" checked>
                            <label for="perm-purchases">Purchases</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm-vendors" checked>
                            <label for="perm-vendors">Vendors</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm-customers" checked>
                            <label for="perm-customers">Customers</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm-repairs" checked>
                            <label for="perm-repairs">Repairs</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm-outsource" checked>
                            <label for="perm-outsource">Outsource</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm-invoices" checked>
                            <label for="perm-invoices">Invoices</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm-quotations" checked>
                            <label for="perm-quotations">Quotations</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm-pickdrop" checked>
                            <label for="perm-pickdrop">Pick & Drop</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm-delivery" checked>
                            <label for="perm-delivery">Delivery</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm-payments" checked>
                            <label for="perm-payments">Payments</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm-reports" checked>
                            <label for="perm-reports">Reports</label>
                        </div>
                        <div class="permission-item">
                            <input type="checkbox" id="perm-users">
                            <label for="perm-users">User Management</label>
                        </div>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="resetUserModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add User</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Camera Preview Modal -->
    <div class="camera-preview" id="camera-preview">
        <video id="camera-video" autoplay playsinline></video>
        <canvas id="camera-canvas" class="hidden"></canvas>
        <div class="camera-controls">
            <button class="btn btn-capture" onclick="capturePhoto()">
                <i class="fas fa-camera"></i> Capture
            </button>
            <button class="btn btn-cancel" onclick="closeCamera()">
                <i class="fas fa-times"></i> Cancel
            </button>
        </div>
    </div>

    <!-- Image Modal for Full View -->
    <div class="image-modal" id="image-modal">
        <button class="close-modal" onclick="closeImageModal()" title="Close image modal">
            <i class="fas fa-times"></i>
        </button>
        <img id="modal-image" src="" alt="Device Image">
    </div>

    <!-- Edit Job Card Modal -->
    <div class="modal" id="edit-job-card-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Job Card</h3>
                <span class="close" onclick="closeEditJobCardModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="edit-job-card-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-job-card-customer">Customer Name</label>
                            <div class="customer-autocomplete">
                                <input type="text" id="edit-job-card-customer">
                                <div class="customer-suggestions" id="edit-job-card-customer-suggestions"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="edit-job-card-phone">Phone Number</label>
                            <input type="tel" id="edit-job-card-phone">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="edit-job-card-address">Address</label>
                        <textarea id="edit-job-card-address" rows="2"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-job-card-device">Device Type</label>
                            <select id="edit-job-card-device">
                                <option value="">Select Device</option>
                                <option value="laptop">Laptop</option>
                                <option value="mobile">Mobile Phone</option>
                                <option value="tablet">Tablet</option>
                                <option value="desktop">Desktop</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="edit-job-card-brand">Brand</label>
                            <input type="text" id="edit-job-card-brand">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-job-card-model">Model Number</label>
                            <input type="text" id="edit-job-card-model">
                        </div>
                        <div class="form-group">
                            <label for="edit-job-card-serial">IMEI/Serial Number</label>
                            <input type="text" id="edit-job-card-serial">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="edit-job-card-issue">Issue Description</label>
                        <textarea id="edit-job-card-issue" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="edit-job-card-diagnosis">Technician Diagnosis</label>
                        <textarea id="edit-job-card-diagnosis" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="edit-job-card-parts">Required Parts</label>
                        <div class="parts-selection-section">
                            <div class="parts-search">
                                <input type="text" id="edit-job-card-parts-search" placeholder="Search parts from inventory..." onkeyup="searchInventoryForJobCard(this)">
                                <div class="parts-suggestions" id="edit-job-card-parts-suggestions"></div>
                            </div>
                            <div class="selected-parts-list" id="edit-job-card-selected-parts">
                                <p class="no-parts-message">No parts selected. Search and add parts from inventory.</p>
                            </div>
                            <div class="parts-summary">
                                <p><strong>Total Parts Cost:</strong> â‚¹<span id="edit-job-card-parts-total">0.00</span></p>
                                <p><strong>Labor Cost:</strong> â‚¹<span id="edit-job-card-labor-cost">0.00</span></p>
                                <p class="total-cost"><strong>Total Estimated Cost:</strong> â‚¹<span id="edit-job-card-total-cost">0.00</span></p>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-job-card-labor-cost-input">Labor Cost (â‚¹)</label>
                            <input type="number" id="edit-job-card-labor-cost-input" min="0" placeholder="Enter labor cost" onchange="updateJobCardTotalCost()">
                        </div>
                        <div class="form-group">
                            <label for="edit-job-card-estimated-time">Estimated Time</label>
                            <input type="text" id="edit-job-card-estimated-time" placeholder="e.g., 2-3 days">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="edit-job-card-estimated-cost">Total Estimated Cost (â‚¹)</label>
                            <input type="number" id="edit-job-card-estimated-cost" min="0" readonly>
                        </div>
                        <div class="form-group">
                            <label for="edit-job-card-status">Status</label>
                            <select id="edit-job-card-status">
                                <option value="pending">Pending</option>
                                <option value="in-progress">In Progress</option>
                                <option value="completed">Completed</option>
                                <option value="delivered">Delivered</option>
                            </select>
                        </div>
                    </div>


                     <div class="form-row">
                         <div class="form-group">
                             <label for="edit-job-card-warranty-enabled">Enable repair warranty</label>
                             <input type="checkbox" id="edit-job-card-warranty-enabled" title="Enable repair warranty">
                         </div>
                         <div class="form-group">
                             <label for="edit-job-card-warranty-months">Warranty Duration (months)</label>
                             <select id="edit-job-card-warranty-months">
                                 <option value="0">No Warranty</option>
                                 <option value="1">1 month</option>
                                 <option value="3">3 months</option>
                                 <option value="6">6 months</option>
                                 <option value="12">12 months</option>
                             </select>
                         </div>
                     </div>
                    
                    <!-- Device Images Section -->
                    <div class="form-group">
                        <label>Device Images</label>
                        <div class="image-upload-section">
                            <div class="image-upload-buttons">
                                <button type="button" class="btn btn-info" onclick="captureDeviceImage('edit-job-card')">
                                    <i class="fas fa-camera"></i> Capture Photo
                                </button>
                                <button type="button" class="btn btn-secondary" onclick="uploadDeviceImage('edit-job-card')">
                                    <i class="fas fa-upload"></i> Upload Image
                                </button>
                                <input type="file" id="edit-job-card-image-input" accept="image/*" class="hidden" onchange="handleImageUpload('edit-job-card', this)">
                            </div>
                            <div class="device-images-container" id="edit-job-card-images-container">
                                <!-- Device images will be displayed here -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeEditJobCardModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Update Job Card</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div id="forgot-password-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Reset Password</h3>
                <span class="close" onclick="closeForgotPasswordModal()">&times;</span>
            </div>
            <form id="forgot-password-form">
                <div class="form-group">
                    <label for="forgot-email">Enter your email address</label>
                    <input type="email" id="forgot-email" required autocomplete="email" title="Enter your email address" placeholder="Email address">
                </div>
                <div id="forgot-password-success" class="login-success"></div>
                <div id="forgot-password-error" class="login-error"></div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeForgotPasswordModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Send Reset Link</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Firebase initialization is handled by firebase-global.js -->
    <script src="firebase-global.js"></script>
    <script src="firebase-init-check.js"></script>
    <script src="firebase-config.js"></script>
    <script src="script.js"></script>
    <!-- quick-fix.js removed - functionality now handled by main script.js -->
    <script src="message-channel-fix.js"></script>

    <script src="cloud-sync-manager.js"></script>
</body>
</html> 